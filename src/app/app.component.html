<div
  class="app-shell"
  [ngClass]="{
    'with-sidebar':
    (isAuthenticated && !hideSidebar && !showingTransition && !isEmilyChatBot) ||isChatbotRoute,
    'with-copilot': isCopilotOpen,
    'copilot-expanded': isCopilotFullyOpen,
    'emily-chatbot': isEmilyChatBot,
    'chatbot-route': isChatbotRoute,
    authenticated: isAuthenticated,
    'overlay-active': overlayActive
  }"
>
  <app-sidebar
    *ngIf="
      (isAuthenticated && !hideSidebar && !showingTransition && !isEmilyChatBot) ||isChatbotRoute
    "
  ></app-sidebar>

  <div class="app-container">
    <ng-container *ngIf="!isMarketSurveyRoute; else fullWidthContent">
      <div class="main-content-area">
        <div
          class="content-container"
          [ngClass]="{ authenticated: isAuthenticated }"
        >
          <router-outlet></router-outlet>
        </div>
      </div>
    </ng-container>

    <ng-template #fullWidthContent>
      <div class="container-fluid full-width-content">
        <router-outlet></router-outlet>
      </div>
    </ng-template>
  </div>

  <app-notifications
    *ngIf="
      isAuthenticated && !hideSidebar && !showingTransition && !isEmilyChatBot 
    "
    [campaignId]="CampaignId"
    [isChatbotRoute]="isChatbotRoute"
    (overlayStateChange)="overlayActive = $event"
    (sidebarStateChange)="onCopilotStateChange($event)"
  >
  </app-notifications>
</div>
