<div id="customToast" class="custom-toast">
  <div class="toast-content">
    <p id="toastMessage"></p>
  </div>
</div>

<div class="automation-container">
  <h2>{{ shoppingCenterName }}</h2>
  <!-- Accept All button -->
  <div
    class="action-section d-flex justify-content-end m-4"
    *ngIf="automationResponses.length > 0"
  >
    <button class="accept-button" (click)="acceptAll()">
      Add All Contacts
    </button>
  </div>

  <!-- Empty state -->
  <div class="empty-state" *ngIf="automationResponses.length === 0">
    <p>No automation responses found.</p>
  </div>

  <!-- Message Box (shown only once) -->
  <div
    class="response-section"
    *ngIf="
      automationResponses.length > 0 && automationResponses[0]?.textResponse
    "
  >
    <h4>Message</h4>
    <div class="message-box">
      {{ automationResponses[0].textResponse }}
    </div>
  </div>

  <!-- Table View -->
  <div class="table-responsive">
    <table class="contacts-table" *ngIf="automationResponses.length > 0">
<thead>
  <tr>
    <th>#</th>
    <th *ngFor="let col of tableColumns">{{ col }}</th>
    <th>Action</th>
  </tr>
</thead>
<tbody>
  <tr *ngFor="let response of automationResponses; let i = index">
    <td>{{ i + 1 }}</td>

    <td *ngFor="let col of tableColumns" [ngClass]="{ 'email-cell': col.toLowerCase() === 'email' }">
      <ng-container *ngIf="col === 'Name'; else defaultColumn">
        {{
          ((response.jsonResponse?.Firstname || '') + ' ' + (response.jsonResponse?.Lastname || '')).trim()
        }}
      </ng-container>
      <ng-template #defaultColumn>
        {{ response.jsonResponse?.[col] || '-' }}
      </ng-template>
    </td>

    <td>
      <ng-container *ngIf="response.jsonResponse?.Email && response.jsonResponse.Email.trim() !== ''">
        <button class="accept-button" (click)="respondToAutomation(response)">
          Add Contact
        </button>
      </ng-container>
      <ng-container *ngIf="!response.jsonResponse?.Email || response.jsonResponse.Email.trim() === ''">
        <button class="add-email-button">Find Email</button>
      </ng-container>
    </td>
  </tr>
</tbody>

    </table>
  </div>
</div>
