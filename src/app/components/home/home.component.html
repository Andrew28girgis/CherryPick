<ngx-spinner type="ball-scale-multiple"></ngx-spinner>

<nav class="container-fluid d-none d-sm-flex">
  <div class="navbar-line m-0">
    <div class="nav-right row m-0">
      <div class="nav-right-responsive col-9 justify-content-strat justify-content-sm-strat gap-0 gap-sm-2">
        <img
          alt="logo"
          class="cherry-logo"
          [routerLink]="['/summary']"
          decoding="async"
          data-nimg="1"
          src="../../../assets/Images/logo.png"
        />
        <p class="titleResponsive ms-2 d-none d-sm-flex">
          {{ BuyBoxName }}
        </p>
        <button
          class="btn custom-share-btn mx-sm-3 mx-2 d-none d-sm-flex"
          (click)="openContactsModal(contactsModal)"
        >
          Share
        </button>
      </div>

      <!-- <div
        class="d-flex flex-row align-items-center py-2"
        *ngIf="currentView == 1 || currentView == 2"
      >
        <ng-container *ngFor="let category of buyboxCategories">
          <div class="d-flex mx-2 competitor">
            <input
              type="checkbox"
              id="{{ category.id }}"
              [(ngModel)]="category.isChecked"
              (change)="onCheckboxChange(category)"
              class="me-2"
            />
            <label class="p-0 m-0" [for]="category.id" style="cursor: pointer">
              {{ category.name }}
            </label>
          </div>
        </ng-container>
      </div> -->

      <!-- <div class="custom-icon-container">
        <div
          class="icon-option"
          *ngFor="let option of dropdowmOptions"
          (click)="selectOption(option)"
          [class.selected]="selectedOption === option"
        >
          <img [src]="option.icon" [alt]="option.text" class="icon-image" />
          <span class="icon-text">{{ option.text }}</span>
        </div>
      </div> -->

      <div class="navbar navbar-expand-lg navbar-light col-3 justify-content-end justify-content-sm-between">
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
          (click)="toggleNavbar()"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div
          class="collapse navbar-collapse"
          [ngClass]="{ show: navbarOpen }"
          id="navbarNav"
        >
          <div
            class="icon-option"
            *ngFor="let option of dropdowmOptions"
            (click)="selectOption(option)"
            [class.selected]="
              selectedOption === option.status || selectedOption === option
            "
            [ngClass]="{
              'hide-on-mobile':
                option.text === 'Table View' || option.text === 'Side List View'
            }"
          >
            <img [src]="option.icon" [alt]="option.text" class="icon-image" />
            <span class="icon-text">{{ option.text }}</span>
          </div>

          <app-logout></app-logout>
        </div>
      </div>
      <div class="col-12 mt-2 mt-sm-0 d-flex d-sm-none p-0 justify-content-between">
        <p class="titleResponsive ms-2">
          {{ BuyBoxName }}
        </p>
        <button class="btn custom-share-btn mx-sm-3 mx-2 d-flex d-sm-none m-0" (click)="openContactsModal(contactsModal)">
        Share
      </button>
      </div>
    </div>
  </div>
</nav>

<ng-container *ngIf="currentView == 5">
  @if (shoppingCenters.length > 0) {
  <div class="indicators-container">
    <div
      class="scroll-indicator up-indicator d-none d-sm-flex"
      (click)="scrollUp()"
      #upIndicator
    >
      <i class="fas fa-chevron-up"></i>
    </div>
    <div
      class="scroll-indicator down-indicator d-none d-sm-flex"
      (click)="scrollDown()"
      #downIndicator
    >
      <i class="fas fa-chevron-down"></i>
    </div>
  </div>
  }
  <div class="scroll-container" #scrollContainer>
    <div class="card" *ngFor="let shopping of shoppingCenters; let i = index">
      <div
        class="social-card mb-0 mb-sm-5 Res"
        [style.backgroundImage]="
          'url(' +
          (shopping.MainImage || 'assets/Images/skeltonImage.png') +
          ')'
        "
      >
        <div class="card-header" (click)="toggleDetails(i,shopping)">
          <div class="header-info Res">
            <h3 class="center-name">{{ shopping.CenterName | titlecase }}</h3>
            <p
              class="center-address shoppingcenterdata total"
              style="color: #fff"
            >
              {{ shopping.CenterAddress }},
              {{ shopping.CenterCity | titlecase }},
              {{ shopping.CenterState }}
            </p>

            <div>
              <p
                style="color: #fff"
                class="getShoppingCenterr"
                [innerHTML]="getShoppingCenterUnitSize(shopping)"
              ></p>
            </div>

            <div *ngIf="showDetails[i]" class="shopping-center-details">
              <div class="row">
                <ng-container
                  *ngFor="let item of shopping.ShoppingCenter?.BuyBoxPlaces"
                >
                  <div
                    class="nearestt"
                    style="color: #fff; padding: 0 !important"
                  >
                    <span>
                      {{ getNeareastCategoryName(item.CategoryId) }}:
                    </span>

                    <img
                      class="logo"
                      src="https://api.cherrypick.com/api/Organization/GetOrgImag?orgId={{
                        item.RelationOrganizationId
                      }}"
                      [title]="item.RelationOrganizationName"
                      alt=""
                    />

                    <span> {{ item.RelationOrganizationName }}</span>
                  </div>
                </ng-container>
              </div>
            </div>
            <p
            *ngIf="shopping.ShoppingCenter?.BuyBoxPlaces?.length"
              class="see-more-btn"
              (click)="toggleDetails(i,shopping); $event.stopPropagation()"
            >
              {{ showDetails[i] ? "See less" : "See more" }}
            </p>
          </div>

          <!-- <div class="header-info Res d-sm-none d-flex">
            <div
              class="info-header"
              (click)="openDetails(shoppingDetails, shopping)"
            >

              <h3 class="center-name" style="color: #fff">
                {{ shopping.CenterName | titlecase }}
              </h3>
              <p class="colorr" style="color: #fff">
                {{ shopping.CenterAddress }}
              </p>
              <p class="center-address" style="color: #fff">
                {{ shopping.CenterCity | titlecase }},
                {{ shopping.CenterState }}
              </p>
              <p
                style="color: #fff"
                class="colorr"
                [innerHTML]="getShoppingCenterUnitSize(shopping)"
              ></p>

              <p class="see-more-btn">
                {{ showMore[i] ? "Show Less" : "See More" }}
              </p>
            </div>
          </div> -->
        </div>
        <div class="card-image Res">
          <div [ngClass]="{ 'image-shadow': showDetails[i] }" style="width: 100%;">
            <img
              class="Res"
              [src]="
                shopping.MainImage && shopping.MainImage !== ''
                  ? shopping.MainImage
                  : 'assets/Images/skeltonImage.png'
              "
              [alt]="shopping.CenterName"
            />
          </div>
        </div>

        <div class="card-footer">
          <div class="reaction-buttons">
            <button
              class="action-btn like-btn"
              [class.liked]="isLiked(shopping)"
              (click)="handleClick(shopping, Like)"
              [disabled]="isLikeInProgress"
            >
              <svg
                class="iconResponsive"
                width="33"
                height="32"
                viewBox="0 0 33 32"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M11.6867 24.6533V11.1067C11.6867 10.5733 11.8467 10.0533 12.14 9.61334L15.78 4.20001C16.3533 3.33334 17.78 2.72001 18.9933 3.17334C20.3 3.61334 21.1667 5.08001 20.8867 6.38667L20.1933 10.7467C20.14 11.1467 20.2467 11.5067 20.4733 11.7867C20.7 12.04 21.0333 12.2 21.3933 12.2H26.8733C27.9267 12.2 28.8333 12.6267 29.3667 13.3733C29.8733 14.0933 29.9667 15.0267 29.6333 15.9733L26.3533 25.96C25.94 27.6133 24.14 28.96 22.3533 28.96H17.1533C16.26 28.96 15.0067 28.6533 14.4333 28.08L12.7267 26.76C12.0733 26.2667 11.6867 25.48 11.6867 24.6533Z"
                  fill="white"
                />
                <path
                  d="M7.44666 8.50671H6.07332C4.00666 8.50671 3.16666 9.30671 3.16666 11.28V24.6934C3.16666 26.6667 4.00666 27.4667 6.07332 27.4667H7.44666C9.51332 27.4667 10.3533 26.6667 10.3533 24.6934V11.28C10.3533 9.30671 9.51332 8.50671 7.44666 8.50671Z"
                  fill="white"
                />
              </svg>

              <span class="d-block d-sm-block">
                {{
                  shopping.ShoppingCenter.Reactions
                    ? shopping.ShoppingCenter.Reactions.length
                    : 0
                }}
              </span>

              <!-- <span class="reactionMobile">
                  {{ getPrimaryReaction(shopping) }}
                </span> -->
            </button>
          </div>

          <button
            class="action-btn comment-btn"
            (click)="toggleComments(shopping, $event)"
          >
            <svg
              width="33"
              height="32"
              viewBox="0 0 33 32"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M25.1267 22.44L25.6467 26.6533C25.78 27.76 24.5933 28.5333 23.6467 27.96L19.0333 25.2133C18.7133 25.0266 18.6333 24.6266 18.8067 24.3066C19.4733 23.08 19.8333 21.6933 19.8333 20.3066C19.8333 15.4266 15.6467 11.4533 10.5 11.4533C9.44668 11.4533 8.42001 11.6133 7.46001 11.9333C6.96668 12.0933 6.48668 11.64 6.60668 11.1333C7.82001 6.27996 12.4867 2.66663 18.06 2.66663C24.5667 2.66663 29.8333 7.58663 29.8333 13.6533C29.8333 17.2533 27.98 20.44 25.1267 22.44Z"
                fill="white"
              />
              <path
                d="M17.8333 20.3067C17.8333 21.8934 17.2467 23.36 16.26 24.52C14.94 26.12 12.8467 27.1467 10.5 27.1467L7.01999 29.2134C6.43332 29.5734 5.68666 29.08 5.76666 28.4L6.09999 25.7734C4.31332 24.5334 3.16666 22.5467 3.16666 20.3067C3.16666 17.96 4.41999 15.8934 6.33999 14.6667C7.52666 13.8934 8.95332 13.4534 10.5 13.4534C14.5533 13.4534 17.8333 16.52 17.8333 20.3067Z"
                fill="white"
              />
            </svg>

            <span class="reactionMobile">
              {{
                shopping.ShoppingCenter.Comments
                  ? shopping.ShoppingCenter.Comments.length
                  : 0
              }}
            </span>
          </button>
          <button
            class="action-btn share-btn"
            (click)="openContactsModal(contactsModal)"
          >
            <svg
              width="33"
              height="32"
              viewBox="0 0 33 32"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M22.02 3.94672L9.98 7.94672C1.88667 10.6534 1.88667 15.0667 9.98 17.7601L13.5533 18.9467L14.74 22.5201C17.4333 30.6134 21.86 30.6134 24.5533 22.5201L28.5667 10.4934C30.3533 5.09339 27.42 2.14672 22.02 3.94672ZM22.4467 11.1201L17.38 16.2134C17.18 16.4134 16.9267 16.5067 16.6733 16.5067C16.42 16.5067 16.1667 16.4134 15.9667 16.2134C15.58 15.8267 15.58 15.1867 15.9667 14.8001L21.0333 9.70672C21.42 9.32006 22.06 9.32006 22.4467 9.70672C22.8333 10.0934 22.8333 10.7334 22.4467 11.1201Z"
                fill="white"
              />
            </svg>

            <span class="share"> Share </span>
          </button>
          <div style="position: relative">
            <button
              style="
                background: #fff;
                border-radius: 20px;
                color: var(--Colors-Primary-500, #001f3f);
              "
              class="ellipsis_icont"
              (click)="toggleShortcutsCard(shopping.Id)"
            >
              <i class="fa-solid fa-ellipsis"></i>
            </button>
            <div
              class="shortcuts_iconCard iconic-card"
              *ngIf="selectedIdCard === shopping.Id"
            >
              <ul>
                <li class="total">
                  <a
                    class="target"
                    [href]="
                      '/emily/' +
                      BuyBoxId +
                      '/' +
                      shopping.ShoppingCenter.ManagerOrganization[0].ID +
                      '/' +
                      shopping.Id
                    "
                    target="_blank"
                  >
                    <i class="fa-regular fa-envelope big-text"></i>
                    Emily
                  </a>
                </li>
                <li>
                  <a class="target" (click)="openGallery(shopping.Id)">
                    <i class="fa-solid fa-images big-text"></i>
                    View Gallery
                  </a>

                  <div
                    class="w-100 d-flex justify-content-end"
                    *ngIf="placeImage && placeImage.length > 0"
                  ></div>
                </li>

                <li (click)="toggleShortcuts(shopping.Id, 'close')">
                  <a
                    class="target"
                    [routerLink]="[
                      '/landing',
                      shopping?.ShoppingCenter?.Places
                        ? shopping.ShoppingCenter.Places[0].Id
                        : 0,
                      shopping.Id,
                      BuyBoxId
                    ]"
                    ><svg
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M6.70001 18.75H4.15002C2.31002 18.75 1.25 17.69 1.25 15.85V4.15002C1.25 2.31002 2.31002 1.25 4.15002 1.25H8.45001C10.29 1.25 11.35 2.31002 11.35 4.15002V6C11.35 6.41 11.01 6.75 10.6 6.75C10.19 6.75 9.84998 6.41 9.84998 6V4.15002C9.84998 3.13002 9.47001 2.75 8.45001 2.75H4.15002C3.13002 2.75 2.75 3.13002 2.75 4.15002V15.85C2.75 16.87 3.13002 17.25 4.15002 17.25H6.70001C7.11001 17.25 7.45001 17.59 7.45001 18C7.45001 18.41 7.11001 18.75 6.70001 18.75Z"
                        fill="#707791"
                      />
                      <path
                        d="M14.9602 22.75H9.12018C7.11018 22.75 5.9502 21.59 5.9502 19.58V8.41998C5.9502 6.40998 7.11018 5.25 9.12018 5.25H14.9602C16.9702 5.25 18.1202 6.40998 18.1202 8.41998V19.58C18.1202 21.59 16.9702 22.75 14.9602 22.75ZM9.12018 6.75C7.92018 6.75 7.4502 7.21998 7.4502 8.41998V19.58C7.4502 20.78 7.92018 21.25 9.12018 21.25H14.9602C16.1502 21.25 16.6202 20.78 16.6202 19.58V8.41998C16.6202 7.21998 16.1502 6.75 14.9602 6.75H9.12018Z"
                        fill="#707791"
                      />
                      <path
                        d="M19.8503 18.75H17.3704C16.9604 18.75 16.6204 18.41 16.6204 18C16.6204 17.59 16.9604 17.25 17.3704 17.25H19.8503C20.8703 17.25 21.2504 16.87 21.2504 15.85V4.15002C21.2504 3.13002 20.8703 2.75 19.8503 2.75H15.5504C14.5304 2.75 14.1504 3.13002 14.1504 4.15002V6C14.1504 6.41 13.8104 6.75 13.4004 6.75C12.9904 6.75 12.6504 6.41 12.6504 6V4.15002C12.6504 2.31002 13.7104 1.25 15.5504 1.25H19.8503C21.6903 1.25 22.7504 2.31002 22.7504 4.15002V15.85C22.7504 17.69 21.6903 18.75 19.8503 18.75Z"
                        fill="#707791"
                      />
                      <path
                        d="M14 11.75H10C9.59 11.75 9.25 11.41 9.25 11C9.25 10.59 9.59 10.25 10 10.25H14C14.41 10.25 14.75 10.59 14.75 11C14.75 11.41 14.41 11.75 14 11.75Z"
                        fill="#707791"
                      />
                      <path
                        d="M14 14.75H10C9.59 14.75 9.25 14.41 9.25 14C9.25 13.59 9.59 13.25 10 13.25H14C14.41 13.25 14.75 13.59 14.75 14C14.75 14.41 14.41 14.75 14 14.75Z"
                        fill="#707791"
                      />
                      <path
                        d="M12 22.75C11.59 22.75 11.25 22.41 11.25 22V19C11.25 18.59 11.59 18.25 12 18.25C12.41 18.25 12.75 18.59 12.75 19V22C12.75 22.41 12.41 22.75 12 22.75Z"
                        fill="#707791"
                      />
                    </svg>
                    View Details
                  </a>
                </li>
                <li (click)="toggleShortcuts(shopping.Id, 'close')">
                  <a
                    class="target"
                    (click)="openMapViewPlace(MapViewPlace, shopping)"
                  >
                    <i class="fa-solid fa-map-location-dot big-text"></i>
                    View location
                  </a>
                </li>
                <li (click)="toggleShortcuts(shopping.Id, 'close')">
                  <a
                    class="target"
                    (click)="openStreetViewPlace(StreetViewPlace, shopping)"
                  >
                    <svg
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <g id="Street View">
                        <path
                          id="Vector"
                          d="M12 3C10.3506 3 9 4.35059 9 6C9 6.83496 9.35742 7.58789 9.91406 8.13281C8.91504 8.80957 8.25 9.96094 8.25 11.25V14.7188L9.75 15.4688V18.75H14.25V15.4688L15.75 14.7188V11.25C15.75 9.96094 15.085 8.80957 14.0859 8.13281C14.6426 7.58789 15 6.83496 15 6C15 4.35059 13.6494 3 12 3ZM12 4.5C12.8379 4.5 13.5 5.16211 13.5 6C13.5 6.83789 12.8379 7.5 12 7.5C11.1621 7.5 10.5 6.83789 10.5 6C10.5 5.16211 11.1621 4.5 12 4.5ZM12 9C13.251 9 14.25 9.99902 14.25 11.25V13.7812L12.75 14.5312V17.25H11.25V14.5312L9.75 13.7812V11.25C9.75 9.99902 10.749 9 12 9ZM6.75 14.1562C4.56152 14.7686 3 15.8057 3 17.25C3 19.7109 7.52637 21 12 21C16.4736 21 21 19.7109 21 17.25C21 15.8057 19.4385 14.7686 17.25 14.1562V15.7266C18.6768 16.1865 19.5 16.7812 19.5 17.25C19.5 18.1465 16.5088 19.5 12 19.5C7.49121 19.5 4.5 18.1465 4.5 17.25C4.5 16.7812 5.32324 16.1865 6.75 15.7266V14.1562Z"
                          fill="#707791"
                        />
                      </g>
                    </svg>
                    Street View
                  </a>
                </li> 
              </ul>
              <i class="fa-solid fa-caret-right caret"></i>
            </div>
          </div>
        </div>
        <div
          class="comments-section"
          *ngIf="showComments[shopping.Id]"
          #commentsContainer
          (click)="$event.stopPropagation()"
        >
          <div #inputField class="comment-input">
            <input
              type="text"
              placeholder="Write a comment..."
              [(ngModel)]="newComments[shopping.MarketSurveyId]"
              (ngModelChange)="trimComment($event, shopping.MarketSurveyId)"
            />
            <button
              class="post-comment-btn"
              (click)="addComment(shopping, shopping.MarketSurveyId)"
            >
              Comment
            </button>
          </div>

          <ul #commentsList class="comment-list">
            <ng-container
              *ngFor="
                let comment of sortCommentsByDate(
                  shopping.ShoppingCenter.Comments
                )
              "
            >
              <li>
                <div class="comment-content d-flex justify-content-between">
                  <p>{{ comment.Comment }}</p>
                  <p>{{ comment.CommentDate | date }}</p>
                  <!-- <button
                          class="reply-btn"
                          (click)="toggleReply(shopping.MarketSurveyId, comment.id)"
                        >
                          Reply
                        </button> -->
                </div>

                <!-- <div
                        class="reply-input"
                        *ngIf="replyingTo[shopping.MarketSurveyId] === comment.id"
                      >
                        <input
                          type="text"
                          placeholder="Write a reply..."
                          [(ngModel)]="newReplies[comment.id]"
                        />
                        <button
                          class="post-reply-btn"
                          (click)="addReply(shopping.MarketSurveyId, comment.id)"
                        >
                          Reply
                        </button>
                      </div> -->

                <!-- <ul
                        class="reply-list"
                        *ngIf="comment.replies && comment.replies.length > 0"
                      >
                        <li *ngFor="let reply of comment.replies">
                          <div class="comment-content">
                            <strong>{{ reply.user }}</strong>
                            <p>{{ reply.text }}</p>
                          </div>
                        </li>
                      </ul> -->
              </li>
            </ng-container>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="row d-sm-none fixed-bottom-mobile">
    <div class="col-12 d-flex justify-content-around align-items-center">
      <div class="custom-icon-container">
        <p routerLink="/summary" class="d-flex d-sm-none Home-icon">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="#7A8591"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-house"
          >
            <path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8" />
            <path
              d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"
            />
          </svg>
        </p>
        <div
          class="icon-option"
          *ngFor="let option of dropdowmOptions"
          (click)="selectOption(option)"
          [class.selected]="
            selectedOption === option.status || selectedOption === option
          "
          [ngClass]="{
            'hide-on-mobile': option.text === 'Side List View'
          }"
        >
          <img [src]="option.icon" [alt]="option.text" class="icon-image" />
        </div>
      </div>
    </div>
  </div>
</ng-container>
<div class="row backgroundd">
  <ng-container *ngIf="currentView == 4">
    <table
      class="procpect-table"
      *ngIf="
        shoppingCenters && shoppingCenters.length > 0
      "
    >
      <thead class="procpect-table-head">
        <tr>
          <th>Name</th>
          <th>Address</th>
          <th>City</th>
          <th>State</th>
          <th *ngIf="placesRepresentative != false">Leased by</th>
          <th class="w250">Unit Size & Lease Price</th>
          <th>
            <ng-container
              *ngFor="
                let item of shoppingCenters[0].ShoppingCenter.BuyBoxPlaces;
                let i = index
              "
            >
              {{ getNeareastCategoryName(item.CategoryId) }}
            </ng-container>
          </th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody class="procpect-table-body">
        <ng-container *ngFor="let shoppingCenter of shoppingCenters">
          <tr>
            <td>
              <span
                class="table-text"
                [innerHTML]="shoppingCenter.CenterName | titlecase"
              ></span>
            </td>
            <td>
              <div
                class="table-text"
                (click)="openMapViewPlace(MapViewPlace, shoppingCenter)"
              >
                {{ shoppingCenter.CenterAddress }}
              </div>
            </td>
            <td>
              <div class="table-text">
                <span class="table-text">
                  {{ shoppingCenter.CenterCity | titlecase }}
                </span>
              </div>
            </td>
            <td>
              <div class="table-text">
                <span class="table-text">
                  {{ shoppingCenter.CenterState }}
                </span>
              </div>
            </td>
            <td *ngIf="placesRepresentative != false">
              <ng-container
                *ngIf="shoppingCenter.ShoppingCenter?.ManagerOrganization"
              >
                <div>
                  <div
                    class="d-flex align-items-center justify-content-between"
                  >
                    <img
                      class="logo"
                      src="https://api.cherrypick.com/api/Organization/GetOrgImag?orgId={{
                        shoppingCenter.ShoppingCenter.ManagerOrganization[0].ID
                      }}"
                      [title]="
                        shoppingCenter.ShoppingCenter.ManagerOrganization[0]
                          .Name
                      "
                      alt=""
                    />

                    <div class="table-text">
                      {{
                        shoppingCenter.ShoppingCenter.ManagerOrganization[0]
                          .Name
                      }}
                    </div>

                    <div>
                      <img
                        class="total"
                        class="ms-2"
                        src="../../../assets/Images/Icons/eye.png"
                        alt="View Manager Details"
                        [ngbPopover]="popoverContent"
                        popoverTitle="Organization Contact Info"
                        triggers="click:outside"
                        [placement]="'right'"
                      />
                    </div>
                  </div>
                  <ng-template #popoverContent>
                    <div
                      *ngFor="
                        let org of shoppingCenter.ShoppingCenter
                          .ManagerOrganization
                      "
                      class="contact-container table-texttt"
                    >
                      <p class="text-bold m-0">
                        {{ org.Firstname | titlecase }}
                        {{ org.LastName | titlecase }}
                      </p>
                      <p class="m-0">{{ org.CellPhone }}</p>
                      <p class="m-0">{{ org.Email }}</p>
                      <hr
                        *ngIf="
                          !isLast(
                            org,
                            shoppingCenter.ShoppingCenter.ManagerOrganization
                          )
                        "
                      />
                    </div>
                  </ng-template>
                </div>
              </ng-container>
            </td>
            <td class="table-text">
              <span
                [innerHTML]="getShoppingCenterUnitSize(shoppingCenter)"
              ></span>
              <div>
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M15 22.75H9C3.57 22.75 1.25 20.43 1.25 15V9C1.25 3.57 3.57 1.25 9 1.25H14C14.41 1.25 14.75 1.59 14.75 2C14.75 2.41 14.41 2.75 14 2.75H9C4.39 2.75 2.75 4.39 2.75 9V15C2.75 19.61 4.39 21.25 9 21.25H15C19.61 21.25 21.25 19.61 21.25 15V10C21.25 9.59 21.59 9.25 22 9.25C22.41 9.25 22.75 9.59 22.75 10V15C22.75 20.43 20.43 22.75 15 22.75Z"
                    fill="black"
                  />
                  <path
                    d="M22 10.75H18C14.58 10.75 13.25 9.42 13.25 6V2C13.25 1.7 13.43 1.42 13.71 1.31C13.99 1.19 14.31 1.26 14.53 1.47L22.53 9.47C22.74 9.68 22.81 10.01 22.69 10.29C22.57 10.57 22.3 10.75 22 10.75ZM14.75 3.81V6C14.75 8.58 15.42 9.25 18 9.25H20.19L14.75 3.81Z"
                    fill="black"
                  />
                  <path
                    d="M13 13.75H7C6.59 13.75 6.25 13.41 6.25 13C6.25 12.59 6.59 12.25 7 12.25H13C13.41 12.25 13.75 12.59 13.75 13C13.75 13.41 13.41 13.75 13 13.75Z"
                    fill="black"
                  />
                  <path
                    d="M11 17.75H7C6.59 17.75 6.25 17.41 6.25 17C6.25 16.59 6.59 16.25 7 16.25H11C11.41 16.25 11.75 16.59 11.75 17C11.75 17.41 11.41 17.75 11 17.75Z"
                    fill="black"
                  />
                </svg>

                <a
                  class="info-value text-dark px-1"
                  href="{{ shoppingCenter.DocsLink }}"
                  target="_blank"
                  >Property Docs</a
                >
              </div>
            </td>
            <td>
              <ng-container
                *ngIf="
                  shoppingCenter?.ShoppingCenter?.BuyBoxPlaces;
                  else emptyTd
                "
              >
                <ng-container
                  *ngFor="
                    let item of shoppingCenter?.ShoppingCenter?.BuyBoxPlaces;
                    let i = index;
                    trackBy: trackByIndex
                  "
                >
                  <div class="d-flex align-items-center justify-content-center">
                    <img
                      class="logo"
                      src="https://api.cherrypick.com/api/Organization/GetOrgImag?orgId={{
                        item.RelationOrganizationId
                      }}"
                      [title]="item.RelationOrganizationName"
                      alt=""
                    />
                    <span>{{ item.RelationOrganizationName }}</span>
                    <div
                      class="d-flex align-items-center justify-content-center"
                    >
                      <span class="ms-2 table-text"> </span>
                    </div>
                  </div>
                </ng-container>
              </ng-container>
            </td>
            <ng-template #emptyTd> </ng-template>

            <td>
              <div
                class="d-flex justify-content-center align-items-center total">
                <div class="d-flex gap16">
                  <div class="framee">
                    <a
                      [routerLink]="[
                        '/landing',
                        shoppingCenter?.ShoppingCenter?.Places
                          ? shoppingCenter.ShoppingCenter.Places[0].Id
                          : 0,
                        shoppingCenter.Id,
                        BuyBoxId
                      ]"
                    >
                      <svg
                        class="svg-icon"
                        width="21"
                        height="20"
                        viewBox="0 0 21 20"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M11.1667 9.16683L18.0001 2.3335"
                          stroke="#817A79"
                          stroke-width="1.5"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        />
                        <path
                          d="M18.6667 5.6665V1.6665H14.6667"
                          stroke="#817A79"
                          stroke-width="1.5"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        />
                        <path
                          d="M9.50024 1.6665H7.83358C3.66691 1.6665 2.00024 3.33317 2.00024 7.49984V12.4998C2.00024 16.6665 3.66691 18.3332 7.83358 18.3332H12.8336C17.0002 18.3332 18.6669 16.6665 18.6669 12.4998V10.8332"
                          stroke="#817A79"
                          stroke-width="1.5"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        />
                      </svg>
                    </a>
                  </div>
                  <div class="framee"
                    (click)="openMapViewPlace(MapViewPlace, shoppingCenter)">
                    <svg
                      class="svg-icon"
                      width="21"
                      height="20"
                      viewBox="0 0 21 20"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <g id="vuesax/outline/location">
                        <g id="location">
                          <path
                            id="Vector"
                            d="M11.9999 14.1699C9.86988 14.1699 8.12988 12.4399 8.12988 10.2999C8.12988 8.15994 9.86988 6.43994 11.9999 6.43994C14.1299 6.43994 15.8699 8.16994 15.8699 10.3099C15.8699 12.4499 14.1299 14.1699 11.9999 14.1699ZM11.9999 7.93994C10.6999 7.93994 9.62988 8.99994 9.62988 10.3099C9.62988 11.6199 10.6899 12.6799 11.9999 12.6799C13.3099 12.6799 14.3699 11.6199 14.3699 10.3099C14.3699 8.99994 13.2999 7.93994 11.9999 7.93994Z"
                            fill="#7A8591"
                          />
                          <path
                            id="Vector_2"
                            d="M12.0002 22.76C10.5202 22.76 9.03018 22.2 7.87018 21.09C4.92018 18.25 1.66018 13.72 2.89018 8.33C4.00018 3.44 8.27018 1.25 12.0002 1.25C12.0002 1.25 12.0002 1.25 12.0102 1.25C15.7402 1.25 20.0102 3.44 21.1202 8.34C22.3402 13.73 19.0802 18.25 16.1302 21.09C14.9702 22.2 13.4802 22.76 12.0002 22.76ZM12.0002 2.75C9.09018 2.75 5.35018 4.3 4.36018 8.66C3.28018 13.37 6.24018 17.43 8.92018 20C10.6502 21.67 13.3602 21.67 15.0902 20C17.7602 17.43 20.7202 13.37 19.6602 8.66C18.6602 4.3 14.9102 2.75 12.0002 2.75Z"
                            fill="#7A8591"
                          />
                        </g>
                      </g>
                    </svg>
                  </div>
                  <div class="framee"
                    (click)="
                      openStreetViewPlace(StreetViewPlace, shoppingCenter)">
                    <svg
                      class="svg-icon"
                      width="35"
                      height="35"
                      viewBox="0 0 56 48"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M23.3281 43.8644C23.54 43.9408 23.7616 44 24 44H28H32C32.2384 44 32.4601 43.9408 32.672 43.8644C39.801 43.4626 48 42.1089 48 38C48 34.2515 41.1746 32.7958 34.5642 32.2639L37.4141 29.4141C37.7891 29.0391 38 28.5303 38 28V22C38 18.3336 35.5072 15.2683 32.1367 14.3265C33.2797 13.2334 34 11.7026 34 10C34 6.6914 31.3086 4 28 4C24.6914 4 22 6.6914 22 10C22 11.7026 22.7203 13.2334 23.8633 14.3265C20.4928 15.2683 18 18.3336 18 22V28C18 28.5303 18.2109 29.0391 18.5859 29.4141L21.4358 32.2639C14.8254 32.7958 8 34.2515 8 38C8 42.1089 16.1991 43.4626 23.3281 43.8644ZM34 39.7666V36.2334C38.7793 36.6182 41.7715 37.3975 43.209 38C41.7715 38.6025 38.7793 39.3818 34 39.7666ZM28 8C29.1035 8 30 8.89746 30 10C30 11.1025 29.1035 12 28 12C26.8965 12 26 11.1025 26 10C26 8.89746 26.8965 8 28 8ZM22 22C22 19.7939 23.7949 18 26 18H30C32.2051 18 34 19.7939 34 22V27.1719L30.5859 30.5859C30.2109 30.9609 30 31.4697 30 32V34.0996V39.9499C29.6979 39.958 29.4011 39.9679 29.0937 39.9726C28.364 39.983 27.6361 39.983 26.9062 39.9726C26.5989 39.9679 26.3021 39.958 26 39.95V34.0996V32C26 31.4697 25.7891 30.9609 25.4141 30.5859L22 27.1719V22ZM22 36.2334V39.7666C17.2207 39.3818 14.2285 38.6025 12.791 38C14.2285 37.3975 17.2207 36.6182 22 36.2334Z"
                        fill="#0D0C0C"
                      />
                    </svg>
                  </div>
                </div>
              </div>
            </td>
          </tr>
        </ng-container>
      </tbody>
    </table>
    <div class="row d-sm-none fixed-bottom-mobile">
      <div class="col-12 d-flex justify-content-around align-items-center">
        <div class="custom-icon-container">
          <p routerLink="/summary" class="d-flex d-sm-none Home-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="#7A8591"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-house"
            >
              <path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8" />
              <path
                d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"
              />
            </svg>
          </p>
          <div
            class="icon-option"
            *ngFor="let option of dropdowmOptions"
            (click)="selectOption(option)"
            [class.selected]="
              selectedOption === option.status || selectedOption === option
            "
            [ngClass]="{
              'hide-on-mobile': option.text === 'Side List View'
            }"
          >
            <img [src]="option.icon" [alt]="option.text" class="icon-image" />
          </div>
        </div>
      </div>
    </div>
  </ng-container>

  <div
    class="background2"
    [ngClass]="{
      'd-none': currentView == 1 || currentView == 4 || currentView == 5,
      'col-md-8 col-sm-12 cards ': currentView == 2,
      'col-12': currentView == 3
    }"
  >
    <div class="row mt-2">
      <ng-container *ngIf="currentView != 2">
        <ng-container *ngFor="let shopping of shoppingCenters">
          <div
            class="card-window total"
            [ngClass]="{
              'col-12 col-sm-4 ': currentView == 3
            }"
          >
          <div class="card-window_c">
            <a
              [routerLink]="[
                      '/landing',
                      shopping?.ShoppingCenter?.Places?.[0]?.Id || 0,
                      shopping?.Id,
                      BuyBoxId 
                    ]"
            >
              <div class="main-img">
                <img src="{{ shopping.MainImage || 'assets/Images/skeltonImage.png' }}" />
              </div>
            </a>
            <div class="content-wrap card-content">
              <div>
                <div class="fitcontent">
                  <a
                    class="textdecoration"
                    [routerLink]="[
                        '/landing',
                        shopping?.ShoppingCenter?.Places
                          ? shopping?.ShoppingCenter?.Places?.[0]?.Id
                          : 0,
                        shopping.Id,
                        BuyBoxId 
                      ]"
                  >
                    <p class="content-title total">
                      {{
                        shopping.CenterName.length > 22
                          ? (shopping.CenterName | titlecase).slice(0, 22) +
                            "..."
                          : (shopping.CenterName | titlecase)
                      }}
                    </p>
                  </a>

                  <div
                    class="card-address total"
                    (click)="openMapViewPlace(MapViewPlace, shopping)"
                  >
                    <span class="mb-5">
                      {{ shopping.CenterAddress }},
                      {{ shopping.CenterCity | titlecase }},
                      {{ shopping.CenterState }}
                    </span>
                  </div>
                  <div>
                    <p class="ShoppingCenterUnit" [innerHTML]="getShoppingCenterUnitSize(shopping)"></p>
                  </div>
                  <div class="row">
                    <div
                      *ngFor="let item of shopping.ShoppingCenter?.BuyBoxPlaces"
                      class="col-12 d-flex flex-column spec"
                    >
                      <div class="d-flex flex-column">
                        <p class="nearset-category" style="color: #000;">
                          <b>{{ getNeareastCategoryName(item.CategoryId) }} </b>
                        </p>
                        <p style="color: #000;">
                          {{ item.RelationOrganizationName }}
                          <img
                            class="logo ms-2"
                            src="https://api.cherrypick.com/api/Organization/GetOrgImag?orgId={{
                              item.RelationOrganizationId
                            }}"
                            [title]="item.RelationOrganizationName"
                            alt=""
                          />
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
                <div
                  class="col-md-12 spec"
                  *ngIf="
                    shopping.ShoppingCenter?.ManagerOrganization &&
                    placesRepresentative != false
                  "
                >
                  <hr class="small-hr mt-2" />
                  <span class="managed-by">Leased by</span>
                  <p class="spec-head">
                    <img
                      class="logo"
                      src="https://api.cherrypick.com/api/Organization/GetOrgImag?orgId={{
                        shopping.ShoppingCenter.ManagerOrganization[0].ID
                      }}"
                      [title]="
                        shopping.ShoppingCenter.ManagerOrganization[0].Name
                      "
                      alt=""
                    />
                    {{ shopping.ShoppingCenter.ManagerOrganization[0].Name }}

                    <img
                      class="ms-2 total"
                      src="../../../assets/Images/Icons/eye.png"
                      alt="View Manager Details"
                      [ngbPopover]="popoverContent"
                      popoverTitle="Organization Contact Info"
                      triggers="click:outside"
                      [placement]="'top'"
                    />
                    <br />
                    <ng-template #popoverContent>
                      <div
                        *ngFor="
                          let org of shopping.ShoppingCenter.ManagerOrganization
                        "
                        class="contact-container table-texttt"
                      >
                        <p class="text-bold m-0">
                          {{ org.Firstname | titlecase }}
                          {{ org.LastName | titlecase }}
                        </p>
                        <p class="m-0">{{ org.CellPhone }}</p>
                        <p class="m-0">{{ org.Email }}</p>
                        <hr
                          *ngIf="
                            !isLast(
                              org,
                              shoppingCenter.ShoppingCenter.ManagerOrganization
                            )
                          "
                        />
                      </div>
                    </ng-template>
                  </p>
                </div>
              </div>

              <!-- <div class="buttons-wrap">
                  <button
                    class="view-details-card"
                    (click)="goToPlace(shopping)"
                  >
                    View Details
                    <svg
                      width="20"
                      height="20"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M12.9999 11.75C12.8099 11.75 12.6199 11.68 12.4699 11.53C12.1799 11.24 12.1799 10.76 12.4699 10.47L20.6699 2.26999C20.9599 1.97999 21.4399 1.97999 21.7299 2.26999C22.0199 2.55999 22.0199 3.03999 21.7299 3.32999L13.5299 11.53C13.3799 11.68 13.1899 11.75 12.9999 11.75Z"
                        fill="#fff"
                      />
                      <path
                        d="M22.0002 7.55C21.5902 7.55 21.2502 7.21 21.2502 6.8V2.75H17.2002C16.7902 2.75 16.4502 2.41 16.4502 2C16.4502 1.59 16.7902 1.25 17.2002 1.25H22.0002C22.4102 1.25 22.7502 1.59 22.7502 2V6.8C22.7502 7.21 22.4102 7.55 22.0002 7.55Z"
                        fill="#fff"
                      />
                      <path
                        d="M15 22.75H9C3.57 22.75 1.25 20.43 1.25 15V9C1.25 3.57 3.57 1.25 9 1.25H11C11.41 1.25 11.75 1.59 11.75 2C11.75 2.41 11.41 2.75 11 2.75H9C4.39 2.75 2.75 4.39 2.75 9V15C2.75 19.61 4.39 21.25 9 21.25H15C19.61 21.25 21.25 19.61 21.25 15V13C21.25 12.59 21.59 12.25 22 12.25C22.41 12.25 22.75 12.59 22.75 13V15C22.75 20.43 20.43 22.75 15 22.75Z"
                        fill="#fff"
                      />
                    </svg>
                  </button>
                  <button
                    *ngIf="ShareOrg[0]"
                    class="view-details-card"
                    style="background-color: rgb(41, 187, 255)"
                    (click)="openLink(ShareLink, shopping)"
                  >
                    Share With {{ ShareOrg[0].name }}
                  </button>
                  <div
                    style="cursor: pointer"
                    (click)="openStreetViewPlace(StreetViewPlace, shopping)"
                  >
                    <svg
                      width="56"
                      height="48"
                      viewBox="0 0 56 48"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M23.3281 43.8644C23.54 43.9408 23.7616 44 24 44H28H32C32.2384 44 32.4601 43.9408 32.672 43.8644C39.801 43.4626 48 42.1089 48 38C48 34.2515 41.1746 32.7958 34.5642 32.2639L37.4141 29.4141C37.7891 29.0391 38 28.5303 38 28V22C38 18.3336 35.5072 15.2683 32.1367 14.3265C33.2797 13.2334 34 11.7026 34 10C34 6.6914 31.3086 4 28 4C24.6914 4 22 6.6914 22 10C22 11.7026 22.7203 13.2334 23.8633 14.3265C20.4928 15.2683 18 18.3336 18 22V28C18 28.5303 18.2109 29.0391 18.5859 29.4141L21.4358 32.2639C14.8254 32.7958 8 34.2515 8 38C8 42.1089 16.1991 43.4626 23.3281 43.8644ZM34 39.7666V36.2334C38.7793 36.6182 41.7715 37.3975 43.209 38C41.7715 38.6025 38.7793 39.3818 34 39.7666ZM28 8C29.1035 8 30 8.89746 30 10C30 11.1025 29.1035 12 28 12C26.8965 12 26 11.1025 26 10C26 8.89746 26.8965 8 28 8ZM22 22C22 19.7939 23.7949 18 26 18H30C32.2051 18 34 19.7939 34 22V27.1719L30.5859 30.5859C30.2109 30.9609 30 31.4697 30 32V34.0996V39.9499C29.6979 39.958 29.4011 39.9679 29.0937 39.9726C28.364 39.983 27.6361 39.983 26.9062 39.9726C26.5989 39.9679 26.3021 39.958 26 39.95V34.0996V32C26 31.4697 25.7891 30.9609 25.4141 30.5859L22 27.1719V22ZM22 36.2334V39.7666C17.2207 39.3818 14.2285 38.6025 12.791 38C14.2285 37.3975 17.2207 36.6182 22 36.2334Z"
                        fill="#0D0C0C"
                      />
                    </svg>
                  </div>
                </div> -->
            </div>
          </div>
          </div>
          <div class="row d-sm-none fixed-bottom-mobile">
            <div class="col-12 d-flex justify-content-around align-items-center">
              <div class="custom-icon-container">
                <p routerLink="/summary" class="d-flex d-sm-none Home-icon">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="#7A8591"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="lucide lucide-house"
                  >
                    <path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8" />
                    <path
                      d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"
                    />
                  </svg>
                </p>
                <div
                  class="icon-option"
                  *ngFor="let option of dropdowmOptions"
                  (click)="selectOption(option)"
                  [class.selected]="
                    selectedOption === option.status || selectedOption === option
                  "
                  [ngClass]="{
                    'hide-on-mobile': option.text === 'Side List View'
                  }"
                >
                  <img [src]="option.icon" [alt]="option.text" class="icon-image" />
                </div>
              </div>
            </div>
          </div>
        </ng-container>
      </ng-container>
      <ng-container *ngIf="currentView == 2">
        <div class="p-3">
          <p class="m-0 f500">
            {{ cardsSideList.length }} places within map area
          </p>
        </div>
        <ng-container *ngFor="let place of cardsSideList">
          <div
            class="card-window total"
            (mouseenter)="onMouseHighlight(place)"
            (mouseleave)="onMouseLeaveHighlight(place)"
            [ngClass]="{
              'col-md-6 col-sm-12': currentView == 2
            }"
          >
          <div class="card-window_c">
            <a
              *ngIf="place.CenterCity"
              [routerLink]="[
                 '/landing',
                 place.ShoppingCenter?.Places
                 ? place.ShoppingCenter.Places?.[0].Id
                  : 0,
                 place.Id,
                BuyBoxId 
               ]"
            >
              <div class="main-img">
                <img src="{{ place.MainImage || 'assets/Images/skeltonImage.png' }}" />
              </div>
            </a>
            <div class="content-wrap card-sideview">
              <div>
                <div *ngIf="place.CenterCity">
                  <a
                    [routerLink]="[
                        '/landing',
                        place.ShoppingCenter?.Places
                          ? place.ShoppingCenter.Places?.[0].Id
                          : 0,
                        place.Id,
                        BuyBoxId
                      ]"
                  >
                    <p class="content-title total">
                      {{
                        place.CenterName.length > 22
                          ? (place.CenterName | titlecase).slice(0, 22) + "..."
                          : (place.CenterName | titlecase)
                      }}
                    </p>
                  </a>
                </div>

                <div
                  *ngIf="place.CenterAddress"
                  class="card-address total"
                  (click)="openMapViewPlace(MapViewPlace, place)"
                >
                  <span>
                    {{ place.CenterAddress }},
                    {{ place.CenterCity | titlecase }},
                    {{ place.CenterState }}
                  </span>
                </div>

                <div
                  *ngIf="place.Address"
                  class="card-address total"
                  (click)="openMapViewPlace(MapViewPlace, place)"
                >
                  <p>
                    {{ place.Address }}, {{ place.City | titlecase }},
                    {{ place.State }}
                  </p>
                </div>

                <div *ngIf="place.CenterAddress">
                  <p class="ShoppingCenterUnit" [innerHTML]="getShoppingCenterUnitSize(place)"></p>
                </div>

                <div
                  class="row"
                  *ngIf="place.ShoppingCenter?.BuyBoxPlaces || place.Place"
                >
                  <div
                    *ngFor="
                      let item of place.ShoppingCenter
                        ? place.ShoppingCenter?.BuyBoxPlaces
                        : place.Place?.BuyBoxPlaces
                    "
                    class="col-12 d-flex flex-column spec"
                  >
                    <div class="d-flex flex-column">
                      <p class="nearset-category">
                        <b>{{ getNeareastCategoryName(item.CategoryId) }} </b>
                      </p>
                      <p style="color: #000;">
                        {{ item.RelationOrganizationName }}
                        <img
                          class="logo ms-2"
                          src="https://api.cherrypick.com/api/Organization/GetOrgImag?orgId={{
                            item.RelationOrganizationId
                          }}"
                          [title]="item.RelationOrganizationName"
                          alt=""
                        />
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- <div class="buttons-wrap">
                  <button class="view-details-card" (click)="goToPlace(place)">
                    View Details
                    <svg
                      width="20"
                      height="20"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M12.9999 11.75C12.8099 11.75 12.6199 11.68 12.4699 11.53C12.1799 11.24 12.1799 10.76 12.4699 10.47L20.6699 2.26999C20.9599 1.97999 21.4399 1.97999 21.7299 2.26999C22.0199 2.55999 22.0199 3.03999 21.7299 3.32999L13.5299 11.53C13.3799 11.68 13.1899 11.75 12.9999 11.75Z"
                        fill="#fff"
                      />
                      <path
                        d="M22.0002 7.55C21.5902 7.55 21.2502 7.21 21.2502 6.8V2.75H17.2002C16.7902 2.75 16.4502 2.41 16.4502 2C16.4502 1.59 16.7902 1.25 17.2002 1.25H22.0002C22.4102 1.25 22.7502 1.59 22.7502 2V6.8C22.7502 7.21 22.4102 7.55 22.0002 7.55Z"
                        fill="#fff"
                      />
                      <path
                        d="M15 22.75H9C3.57 22.75 1.25 20.43 1.25 15V9C1.25 3.57 3.57 1.25 9 1.25H11C11.41 1.25 11.75 1.59 11.75 2C11.75 2.41 11.41 2.75 11 2.75H9C4.39 2.75 2.75 4.39 2.75 9V15C2.75 19.61 4.39 21.25 9 21.25H15C19.61 21.25 21.25 19.61 21.25 15V13C21.25 12.59 21.59 12.25 22 12.25C22.41 12.25 22.75 12.59 22.75 13V15C22.75 20.43 20.43 22.75 15 22.75Z"
                        fill="#fff"
                      />
                    </svg>
                  </button>
                </div> -->

              <div
                class="col-md-12 spec"
                *ngIf="
                  place.ShoppingCenter?.ManagerOrganization &&
                  placesRepresentative != false
                "
              >
                <span class="managed-by">Leased by</span>
                <p class="spec-head">
                  <img
                    class="logo"
                    src="https://api.cherrypick.com/api/Organization/GetOrgImag?orgId={{
                      place.ShoppingCenter.ManagerOrganization[0].ID
                    }}"
                    [title]="place.ShoppingCenter.ManagerOrganization[0].Name"
                    alt=""
                  />
                  <span>
                    {{ place.ShoppingCenter.ManagerOrganization[0].Name }}
                  </span>

                  <img
                    class="ms-2 total"
                    src="../../../assets/Images/Icons/eye.png"
                    alt="View Manager Details"
                    [ngbPopover]="popoverContent"
                    popoverTitle="Organization Contact Info"
                    [placement]="'top'"
                  />
                  <br />
                  <ng-template #popoverContent>
                    <div
                      *ngFor="
                        let org of place.ShoppingCenter.ManagerOrganization
                      "
                      class="contact-container table-texttt"
                    >
                      <p class="text-bold m-0">
                        {{ org.Firstname | titlecase }}
                        {{ org.LastName | titlecase }}
                      </p>
                      <p class="m-0">{{ org.CellPhone }}</p>
                      <p class="m-0">{{ org.Email }}</p>
                      <hr
                        *ngIf="
                          !isLast(
                            org,
                            shoppingCenter.ShoppingCenter.ManagerOrganization
                          )
                        "
                      />
                    </div>
                  </ng-template>
                </p>
              </div>
            </div>
          </div>
          </div>
        </ng-container>
        <div class="row d-sm-none fixed-bottom-mobile">
          <div class="col-12 d-flex justify-content-around align-items-center">
            <div class="custom-icon-container">
              <p routerLink="/summary" class="d-flex d-sm-none Home-icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="#7A8591"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-house"
                >
                  <path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8" />
                  <path
                    d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"
                  />
                </svg>
              </p>
              <div
                class="icon-option"
                *ngFor="let option of dropdowmOptions"
                (click)="selectOption(option)"
                [class.selected]="
                  selectedOption === option.status || selectedOption === option
                "
                [ngClass]="{
                  'hide-on-mobile': option.text === 'Side List View'
                }"
              >
                <img [src]="option.icon" [alt]="option.text" class="icon-image" />
              </div>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
  </div>

  <div
    class="p-0"
    [ngClass]="{
      'd-none': currentView == 4 || currentView == 3 || currentView == 5,
      'col-12': currentView == 1,
      'col-12 col-sm-4': currentView == 2
    }"
  >
    <div id="map" class="custom-map"></div>
    <div class="row d-sm-none fixed-bottom-mobile">
      <div class="col-12 d-flex justify-content-around align-items-center">
        <div class="custom-icon-container">
          <p routerLink="/summary" class="d-flex d-sm-none Home-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="#7A8591"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-house"
            >
              <path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8" />
              <path
                d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"
              />
            </svg>
          </p>
          <div
            class="icon-option"
            *ngFor="let option of dropdowmOptions"
            (click)="selectOption(option)"
            [class.selected]="
              selectedOption === option.status || selectedOption === option
            "
            [ngClass]="{
              'hide-on-mobile': option.text === 'Side List View'
            }"
          >
            <img [src]="option.icon" [alt]="option.text" class="icon-image" />
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #MapViewPlace let-modal>
  <div id="mappopup h700" *ngIf="mapViewOnePlacex"></div>
</ng-template>

<ng-template #ShareLink let-modal>
  <div
    class="d-flex p-3 m-3 align-items-center shareborder">
    <p class="share-link">{{ shareLink }}</p>
    <i
      class="fa-solid fa-copy ms-3 total"
      (click)="copyLink(shareLink)"
    ></i>
  </div>
</ng-template>

<ng-template #StreetViewPlace let-modal>
  <div *ngIf="General.modalObject.StreetViewURL">
    <iframe
      [src]="sanitizedUrl"
      height="450"
      class="santiurl"
      allowfullscreen=""
    >
    </iframe>
  </div>
  <div
    id="street-view"
    class="h700"
    *ngIf="!General.modalObject.StreetViewURL"
  ></div>
</ng-template>

<ng-template #contactsModal let-modal>
  <div class="modal-header d-flex justify-content-between align-items-center">
    <span class="modal-title" id="modal-basic-title">Contacts</span>
    <div>
      <button
        type="button"
        class="btn btn-primary me-2 contact-btn"
        (click)="openAddContactModal(addContactModal)"
      >
        Add New Contact
      </button>
      <button
        type="button"
        class="btn btn-close contact-btn"
        aria-label="Close"
        (click)="modal.dismiss('Cross click')"
      ></button>
    </div>
  </div>
  <!-- Added inline styles for vertical scrolling -->
  <div class="modal-body bodymodal">
    <div
      *ngFor="let contact of OrganizationContacts"
      class="mb-3 border-bottom pb-2 d-flex justify-content-between align-items-center"
    >
      <div>
        <div>
          <span class="first-last"
            >{{ contact.firstname }} {{ contact.lastname }}
          </span>
        </div>
        <div>
          <span class="email">
            {{ contact.email }}
          </span>
        </div>
      </div>
      <!-- Pass the contact to openLink -->
      <i
        class="fa-solid fa-share ms-2 sharee-link"
        (click)="openLink(ShareLink, contact)"
      >
      </i>
    </div>
  </div>
  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-secondary contact-btn"
      (click)="modal.close()"
    >
      Close
    </button>
  </div>
</ng-template>

<ng-template #addContactModal let-modal>
  <form (ngSubmit)="addContact(addContactForm)" #addContactForm="ngForm">
    <div class="modal-header d-flex justify-content-between align-items-center">
      <span class="modal-title" id="modal-add-contact">Add Contact</span>
      <div>
        <button
          type="button"
          class="btn btn-close contact-btn"
          aria-label="Close"
          (click)="modal.dismiss('Cross click')"
        ></button>
      </div>
    </div>
    <div class="modal-body">
      <div class="mb-3">
        <label for="firstName" class="form-label">First Name</label>
        <input
          type="text"
          id="firstName"
          class="form-control"
          required
          [(ngModel)]="newContact.firstName"
          name="firstName"
        />
      </div>
      <div class="mb-3">
        <label for="lastName" class="form-label">Last Name</label>
        <input
          type="text"
          id="lastName"
          class="form-control"
          required
          [(ngModel)]="newContact.lastName"
          name="lastName"
        />
      </div>
      <!-- <div class="mb-3">
        <label for="email" class="form-label">Email</label>
        <input
          type="email"
          id="email"
          class="form-control"
          required
          [(ngModel)]="newContact.email"
          name="email"
        />
      </div>
      <div class="mb-3">
        <label for="password" class="form-label">Password</label>
        <input
          type="password"
          id="password"
          class="form-control"
          required
          [(ngModel)]="newContact.password"
          name="password"
        />
      </div> -->
    </div>
    <div class="modal-footer">
      <button
        type="submit"
        class="btn btn-primary me-2 contact-btn"
        [disabled]="!addContactForm.form.valid"
      >
        Save
      </button>
      <button
        type="button"
        class="btn btn-secondary contact-btn"
        (click)="modal.close()"
      >
        Close
      </button>
    </div>
  </form>
</ng-template>

<ng-template #Like let-modal>
  <div class="modal-main like-modal">
    <!-- Header Section -->
    <div class="modal-header tiktok-header">
      <div class="d-flex align-items-center head">
        <img
          [src]="
            General.modalObject.MainImage &&
            General.modalObject.MainImage !== ''
              ? General.modalObject.MainImage
              : 'assets/Images/skeltonImage.png'
          "
          alt="Location"
          class="location-image mr-3"
        />
        <div>
          <h4 class="modal-title">{{ General.modalObject.CenterName }}</h4>
          <p class="location-address">
            {{ General.modalObject.CenterAddress }}
          </p>
          <p class="location-address">
            {{ General.modalObject.CenterCity | titlecase }},
            {{ General.modalObject.CenterState }}
          </p>
        </div>
      </div>
      <button
        type="button  btn-danger"
        class="close btn btn-danger"
        aria-label="Close"
        (click)="modal.close()"
      >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>

    <!-- Feedback Section -->
    <div class="modal-body tiktok-body">
      <div class="d-flex reactions-div" style="margin-top: 20px;">
        <p class="text-center mb-3 question">How do you find it?</p>
        <div class="rating-container">
          <div class="rating-option">
            <span class="rating-label">I don't like it</span>
            <button
              type="button"
              class="rating-button"
              [class.selected]="selectedRating === 'dislike'"
              (click)="rate('dislike')"
            >
              <div class="rating-circle dislike">
                <div class="inner-circle"></div>
              </div>
            </button>
          </div>

          <div class="rating-option">
            <span class="rating-label">Not Bad</span>
            <button
              type="button"
              class="rating-button"
              [class.selected]="selectedRating === 'neutral'"
              (click)="rate('neutral')"
            >
              <div class="rating-circle neutral">
                <div class="inner-circle"></div>
              </div>
            </button>
          </div>
          <div class="rating-option">
            <span class="rating-label">I like it</span>
            <button
              type="button"
              class="rating-button"
              [class.selected]="selectedRating === 'like'"
              (click)="rate('like')"
            >
              <div class="rating-circle like">
                <div class="inner-circle"></div>
              </div>
            </button>
          </div>
        </div>
      </div>

      <!-- Add Note Section -->
      <div class="input-container">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          class="input-icon"
        >
          <path
            d="M15.8101 20.18C15.5501 20.18 15.2801 20.17 14.9901 20.14C14.4701 20.1 13.8801 20 13.2701 19.85L11.5901 19.45C6.98007 18.36 5.47007 15.92 6.55007 11.32L7.53007 7.13001C7.75007 6.18002 8.01007 5.41002 8.33007 4.77002C10.0501 1.22002 13.3401 1.54001 15.6801 2.09001L17.3501 2.48001C19.6901 3.03001 21.1701 3.90001 22.0001 5.23002C22.8201 6.56002 22.9501 8.27001 22.4001 10.61L21.4201 14.79C20.5601 18.45 18.7701 20.18 15.8101 20.18ZM13.1201 3.25001C11.4501 3.25001 10.3901 3.94002 9.68007 5.42002C9.42007 5.96002 9.19007 6.63001 8.99007 7.47001L8.01007 11.66C7.12007 15.44 8.15007 17.09 11.9301 17.99L13.6101 18.39C14.1501 18.52 14.6601 18.6 15.1201 18.64C17.8401 18.91 19.1901 17.72 19.9501 14.45L20.9301 10.27C21.3801 8.34002 21.3201 6.99002 20.7201 6.02001C20.1201 5.05001 18.9401 4.39002 17.0001 3.94002L15.3301 3.55001C14.5001 3.35001 13.7601 3.25001 13.1201 3.25001Z"
            fill="#7A8591"
          />
          <path
            d="M8.33005 22.25C5.76005 22.25 4.12005 20.71 3.07005 17.46L1.79005 13.51C0.370052 9.10999 1.64005 6.62999 6.02005 5.20999L7.60005 4.69999C8.12005 4.53999 8.51005 4.42999 8.86005 4.36999C9.15005 4.30999 9.43005 4.41999 9.60005 4.64999C9.77005 4.87999 9.80005 5.17999 9.68005 5.43999C9.42005 5.96999 9.19005 6.63999 9.00005 7.47999L8.02005 11.67C7.13005 15.45 8.16005 17.1 11.9401 18L13.6201 18.4C14.1601 18.53 14.6701 18.61 15.1301 18.65C15.4501 18.68 15.7101 18.9 15.8001 19.21C15.8801 19.52 15.7601 19.84 15.5001 20.02C14.8401 20.47 14.0101 20.85 12.9601 21.19L11.3801 21.71C10.2301 22.07 9.23005 22.25 8.33005 22.25ZM7.78005 6.21999L6.49005 6.63999C2.92005 7.78999 2.07005 9.46999 3.22005 13.05L4.50005 17C5.66005 20.57 7.34005 21.43 10.9101 20.28L12.4901 19.76C12.5501 19.74 12.6001 19.72 12.6601 19.7L11.6001 19.45C6.99005 18.36 5.48005 15.92 6.56005 11.32L7.54005 7.12999C7.61005 6.80999 7.69005 6.49999 7.78005 6.21999Z"
            fill="#7A8591"
          />
          <path
            d="M17.4901 10.51C17.4301 10.51 17.3701 10.5 17.3001 10.49L12.4501 9.25999C12.0501 9.15999 11.8101 8.74999 11.9101 8.34999C12.0101 7.94999 12.4201 7.70999 12.8201 7.80999L17.6701 9.03999C18.0701 9.13999 18.3101 9.54999 18.2101 9.94999C18.1301 10.28 17.8201 10.51 17.4901 10.51Z"
            fill="#7A8591"
          />
          <path
            d="M14.5599 13.89C14.4999 13.89 14.4399 13.88 14.3699 13.87L11.4599 13.13C11.0599 13.03 10.8199 12.62 10.9199 12.22C11.0199 11.82 11.4299 11.58 11.8299 11.68L14.7399 12.42C15.1399 12.52 15.3799 12.93 15.2799 13.33C15.1999 13.67 14.8999 13.89 14.5599 13.89Z"
            fill="#7A8591"
          />
        </svg>
        <input type="text" placeholder="Add a note" />
      </div>

      <!-- Location Preference Section -->
      <div class="preference-options mb-4">
        <div class="location-card">
          <h4 class="modal-title">{{ General.modalObject.CenterName }}</h4>
          <p class="address">{{ General.modalObject.CenterAddress }}</p>
          <p class="address">
            {{ General.modalObject.CenterCity | titlecase }},
          </p>
        </div>

        <div class="or-divider">or</div>

        <div class="location-card">
          <h4 class="modal-title">{{ General.modalObject.CenterName }}</h4>
          <p class="address">{{ General.modalObject.CenterAddress }}</p>
          <p class="address">
            {{ General.modalObject.CenterCity | titlecase }},
          </p>
        </div>
      </div>
    </div>
  </div>
</ng-template>
