<div class="campaign-manager-container">
  <div class="w-100 d-flex align-items-center justify-content-between">
    <div class="search-campaign-container">
      <input
        type="text"
        class="form-control search-campaign-input"
        placeholder="Search Campaigns..."
        name="searchCampaign"
        [(ngModel)]="searchCampaign"
        (input)="onSearchCampaign()"
      />
      <svg
        class="search-campaign-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
      >
        <path
          d="M11.5 21.75C5.85 21.75 1.25 17.15 1.25 11.5C1.25 5.85 5.85 1.25 11.5 1.25C17.15 1.25 21.75 5.85 21.75 11.5C21.75 17.15 17.15 21.75 11.5 21.75ZM11.5 2.75C6.67 2.75 2.75 6.68 2.75 11.5C2.75 16.32 6.67 20.25 11.5 20.25C16.33 20.25 20.25 16.32 20.25 11.5C20.25 6.68 16.33 2.75 11.5 2.75Z"
          fill="#707791"
        />
        <path
          d="M21.9999 22.7499C21.8099 22.7499 21.6199 22.6799 21.4699 22.5299L19.4699 20.5299C19.1799 20.2399 19.1799 19.7599 19.4699 19.4699C19.7599 19.1799 20.2399 19.1799 20.5299 19.4699L22.5299 21.4699C22.8199 21.7599 22.8199 22.2399 22.5299 22.5299C22.3799 22.6799 22.1899 22.7499 21.9999 22.7499Z"
          fill="#707791"
        />
      </svg>
    </div>
    <button class="add-new-campaign" (click)="openAddCampaignPopup(content)">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="20"
        height="20"
        viewBox="0 0 20 20"
        fill="none"
      >
        <path
          d="M10.0001 18.3333C14.5834 18.3333 18.3334 14.5833 18.3334 9.99996C18.3334 5.41663 14.5834 1.66663 10.0001 1.66663C5.41675 1.66663 1.66675 5.41663 1.66675 9.99996C1.66675 14.5833 5.41675 18.3333 10.0001 18.3333Z"
          stroke="white"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
        <path
          d="M6.66675 10H13.3334"
          stroke="white"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
        <path
          d="M10 13.3333V6.66663"
          stroke="white"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
      <span>Add New Campaign</span>
    </button>
  </div>

  <div class="campaign-manager-body">
    <div class="table-responsive">
      <table class="table align-middle">
        <thead>
          <tr>
            <th scope="col">Campaign Name</th>
            <th scope="col">Tenant</th>
            <th scope="col">Privacy</th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let campaign of filteredCampaigns">
            <tr>
              <td>
                {{ campaign.CampaignName }}
              </td>
              <td>
                <div class="d-flex align-items-center gap-2">
                  <img
                    *ngIf="campaign.BuyBoxes[0].OrganizationId"
                    [src]="
                      'https://api.cherrypick.com/api/Organization/GetOrgImag?orgId=' +
                      campaign.BuyBoxes[0].OrganizationId
                    "
                    [alt]="campaign.BuyBoxes[0].Name"
                    class="tenant-logo"
                  />
                  <span>{{ campaign.BuyBoxes[0].Name }}</span>
                </div>
              </td>
              <td>
                <div
                  class="campaign-privacy"
                  [ngClass]="{
                    'campaign-privacy-public': campaign.CampaignPrivacy == 0,
                    'campaign-privacy-private': campaign.CampaignPrivacy == 1
                  }"
                >
                  <div class="campaign-privacy-icon"></div>
                  <span>
                    {{
                      campaign.CampaignPrivacy == 0 ? "Public" : "Private"
                    }}</span
                  >
                </div>
              </td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>
  </div>
</div>

<ng-template #content let-modal>
  <div class="modal-body">
    <label for="user-buybox" class="form-label mb-2">Select Tenants</label>
    <select
      id="user-buybox"
      class="form-select mb-3"
      aria-label="Buybox select"
    >
      <ng-container *ngFor="let buyBox of userBuyBoxes">
        <option [value]="buyBox.id">
          {{ buyBox.name }}
        </option>
      </ng-container>
    </select>

    <div class="campaign-drawing-component">
      <app-campaign-drawing [buyBoxId]="selectedBuyBoxId" (onCampaignCreated)="onCampaignCreated()"></app-campaign-drawing>
    </div>
  </div>
</ng-template>

<ngx-spinner type="ball-scale-multiple"> </ngx-spinner>
