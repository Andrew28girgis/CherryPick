<div class="property-card">
  <div class="property-controls">
    <div
      *ngIf="
        (property.Latitude && property.Longitude) || property.StreetViewURL
      "
      ngbDropdown
    >
      <div class="property-options" ngbDropdownToggle>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
        >
          <path
            d="M4.16699 8.2085C5.15737 8.20867 5.95801 9.01007 5.95801 10.0005C5.95783 10.9908 5.15726 11.7913 4.16699 11.7915C3.17658 11.7915 2.37518 10.9909 2.375 10.0005C2.375 9.00996 3.17647 8.2085 4.16699 8.2085ZM4.16699 8.4585C3.31585 8.4585 2.625 9.14935 2.625 10.0005C2.62518 10.8515 3.31596 11.5415 4.16699 11.5415C5.01788 11.5413 5.70783 10.8514 5.70801 10.0005C5.70801 9.14945 5.01799 8.45867 4.16699 8.4585Z"
            fill="#16181D"
            stroke="#16181D"
          />
          <path
            d="M15.8334 12.2918C14.5667 12.2918 13.5417 11.2668 13.5417 10.0002C13.5417 8.7335 14.5667 7.7085 15.8334 7.7085C17.1001 7.7085 18.1251 8.7335 18.1251 10.0002C18.1251 11.2668 17.1001 12.2918 15.8334 12.2918ZM15.8334 8.9585C15.2584 8.9585 14.7917 9.42516 14.7917 10.0002C14.7917 10.5752 15.2584 11.0418 15.8334 11.0418C16.4084 11.0418 16.8751 10.5752 16.8751 10.0002C16.8751 9.42516 16.4084 8.9585 15.8334 8.9585Z"
            fill="#16181D"
          />
          <path
            d="M9.99992 12.2918C8.73325 12.2918 7.70825 11.2668 7.70825 10.0002C7.70825 8.7335 8.73325 7.7085 9.99992 7.7085C11.2666 7.7085 12.2916 8.7335 12.2916 10.0002C12.2916 11.2668 11.2666 12.2918 9.99992 12.2918ZM9.99992 8.9585C9.42492 8.9585 8.95825 9.42516 8.95825 10.0002C8.95825 10.5752 9.42492 11.0418 9.99992 11.0418C10.5749 11.0418 11.0416 10.5752 11.0416 10.0002C11.0416 9.42516 10.5749 8.9585 9.99992 8.9585Z"
            fill="#16181D"
          />
        </svg>
      </div>
      <div ngbDropdownMenu>
        <button
          *ngIf="property.Latitude && property.Longitude"
          class="property-option-btn"
          ngbDropdownItem
          (click)="openPropertyLocationModal(propertyLocationView, property)"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
          >
            <path
              d="M11.9999 14.1699C9.86988 14.1699 8.12988 12.4399 8.12988 10.2999C8.12988 8.15994 9.86988 6.43994 11.9999 6.43994C14.1299 6.43994 15.8699 8.16994 15.8699 10.3099C15.8699 12.4499 14.1299 14.1699 11.9999 14.1699ZM11.9999 7.93994C10.6999 7.93994 9.62988 8.99994 9.62988 10.3099C9.62988 11.6199 10.6899 12.6799 11.9999 12.6799C13.3099 12.6799 14.3699 11.6199 14.3699 10.3099C14.3699 8.99994 13.2999 7.93994 11.9999 7.93994Z"
              fill="#292D32"
            />
            <path
              d="M12.0002 22.76C10.5202 22.76 9.03018 22.2 7.87018 21.09C4.92018 18.25 1.66018 13.72 2.89018 8.33C4.00018 3.44 8.27018 1.25 12.0002 1.25C12.0002 1.25 12.0002 1.25 12.0102 1.25C15.7402 1.25 20.0102 3.44 21.1202 8.34C22.3402 13.73 19.0802 18.25 16.1302 21.09C14.9702 22.2 13.4802 22.76 12.0002 22.76ZM12.0002 2.75C9.09018 2.75 5.35018 4.3 4.36018 8.66C3.28018 13.37 6.24018 17.43 8.92018 20C10.6502 21.67 13.3602 21.67 15.0902 20C17.7602 17.43 20.7202 13.37 19.6602 8.66C18.6602 4.3 14.9102 2.75 12.0002 2.75Z"
              fill="#292D32"
            />
          </svg>
          <div>View Location</div>
        </button>
        <button
          *ngIf="property.StreetViewURL"
          class="property-option-btn"
          ngbDropdownItem
          (click)="openPropertyStreetViewModal(propertyStreetView, property)"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
          >
            <path
              d="M12 3C10.3506 3 9 4.35059 9 6C9 6.83496 9.35742 7.58789 9.91406 8.13281C8.91504 8.80957 8.25 9.96094 8.25 11.25V14.7188L9.75 15.4688V18.75H14.25V15.4688L15.75 14.7188V11.25C15.75 9.96094 15.085 8.80957 14.0859 8.13281C14.6426 7.58789 15 6.83496 15 6C15 4.35059 13.6494 3 12 3ZM12 4.5C12.8379 4.5 13.5 5.16211 13.5 6C13.5 6.83789 12.8379 7.5 12 7.5C11.1621 7.5 10.5 6.83789 10.5 6C10.5 5.16211 11.1621 4.5 12 4.5ZM12 9C13.251 9 14.25 9.99902 14.25 11.25V13.7812L12.75 14.5312V17.25H11.25V14.5312L9.75 13.7812V11.25C9.75 9.99902 10.749 9 12 9ZM6.75 14.1562C4.56152 14.7686 3 15.8057 3 17.25C3 19.7109 7.52637 21 12 21C16.4736 21 21 19.7109 21 17.25C21 15.8057 19.4385 14.7686 17.25 14.1562V15.7266C18.6768 16.1865 19.5 16.7812 19.5 17.25C19.5 18.1465 16.5088 19.5 12 19.5C7.49121 19.5 4.5 18.1465 4.5 17.25C4.5 16.7812 5.32324 16.1865 6.75 15.7266V14.1562Z"
              fill="black"
            />
          </svg>
          <div>Street View</div>
        </button>
      </div>
    </div>
  </div>

  <div class="property-image">
    <img loading="lazy" 
      [src]="
        property.MainImage ?? '../../../../../assets/Images/DefaultImage.png'
      "
      [alt]="property.CenterName"
    />
  </div>

  <div class="property-name">
    {{ property.CenterName }}
  </div>

  <div class="property-address">
    {{ property.CenterAddress }}
  </div>
</div>

<ng-template #propertyStreetView let-modal>
  <div *ngIf="sanitizedPropertyStreetViewUrl">
    <iframe
      [src]="sanitizedPropertyStreetViewUrl"
      height="700"
      width="798px"
      class="sanitizedUrl"
      allowfullscreen=""
    >
    </iframe>
  </div>
</ng-template>

<ng-template #propertyLocationView let-modal>
  <div id="mapLocationView" style="height: 700px"></div>
</ng-template>
