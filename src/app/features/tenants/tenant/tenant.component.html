<ngx-spinner type="ball-scale-multiple"></ngx-spinner>
<div class="allpage">
  <div class="overfloww allbackground">
    <div class="container">
      <div class="row">
        <div class="col-12" *ngIf="TenantResult && TenantResult.Buybox">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center justify-content-center">
              <div>
                <img
                  class="tenant-logo"
                  [src]="
                    'https://api.cherrypick.com/api/Organization/GetOrgImag?orgId=' +
                    organizationid
                  "
                  alt="Tenant Logo"
                />
              </div>
              <div
                class="d-flex flex-column align-items-center justify-content-center gap-2"
              >
                <div>
                  <span class="buyboxname">
                    {{ TenantResult.Buybox[0].BuyBoxOrganization[0].Name }}
                  </span>
                </div>
              </div>
            </div>
            <div class="sharebtn">
              <img src="../../../../assets/Images/Icons/share.png" />
              <span>Share</span>
            </div>
          </div>
          <div class="row mt-3 d-flex align-items-stretch">
            <div class="col-md-3 d-flex flex-column">
              <div *ngIf="TenantResult" class="heightimportant">
                <div class="card shoppingcentercard">
                  <div class="card-body d-flex flex-column">
                    <h4 class="ShoppingCenterInformation">
                      BuyBox Specifications
                    </h4>
                    <!-- Size Range -->
                    <div
                      *ngIf="
                        TenantResult.Buybox[0].MinBuildingSize ||
                        TenantResult.Buybox[0].MaxBuildingSize
                      "
                    >
                      <div>
                        <div class="spec-content">
                          <div class="spec-title">Size needed</div>
                          <div class="spec-value">
                            {{
                              TenantResult.Buybox[0].MinBuildingSize | number
                            }}
                            SF -
                            {{
                              TenantResult.Buybox[0].MaxBuildingSize | number
                            }}
                            SF
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Ceiling Height -->
                    <div *ngIf="TenantResult.Buybox[0].CeilingHeight">
                      <div>
                        <div class="spec-content">
                          <div class="spec-title">Ceiling Height</div>
                          <div class="spec-value">
                            {{ TenantResult.Buybox[0].CeilingHeight }} ft
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Drive Thru -->
                    <div *ngIf="TenantResult.Buybox[0].DriveThru !== undefined">
                      <div>
                        <div class="spec-content">
                          <div class="spec-title">Drive Thru</div>
                          <div class="spec-value">
                            {{
                              TenantResult.Buybox[0].DriveThru
                                ? "Required"
                                : "Not Required"
                            }}
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Overnight Boarding -->
                    <div
                      *ngIf="
                        TenantResult.Buybox[0].OvernightBoardingPermitted !==
                        undefined
                      "
                    >
                      <div>
                        <div class="spec-content">
                          <div class="spec-title">Overnight Boarding</div>
                          <div class="spec-value">
                            {{
                              TenantResult.Buybox[0].OvernightBoardingPermitted
                                ? "Permitted"
                                : "Not Permitted"
                            }}
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Building Type -->
                    <div *ngIf="TenantResult.Buybox[0].BuildingType">
                      <div>
                        <div class="spec-content">
                          <div class="spec-title">Building Type</div>
                          <div class="spec-value">
                            {{ TenantResult.Buybox[0].BuildingType }}
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Deal Structure -->
                    <div *ngIf="TenantResult.Buybox[0].DealStructure">
                      <div>
                        <div class="spec-content">
                          <div class="spec-title">Deal Structure</div>
                          <div class="spec-value">
                            {{ TenantResult.Buybox[0].DealStructure }}
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Lease Term -->
                    <div *ngIf="TenantResult.Buybox[0].LeaseTerm">
                      <div>
                        <div class="spec-content">
                          <div class="spec-title">Lease Term</div>
                          <div class="spec-value">
                            {{ TenantResult.Buybox[0].LeaseTerm }}
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- NNN Charges -->
                    <div *ngIf="TenantResult.Buybox[0].NNNCharges">
                      <div>
                        <div class="spec-icon">
                          <img
                            src="../../../assets/Images/SVG/charges.png"
                            alt="NNN Charges"
                          />
                        </div>
                        <div class="spec-content">
                          <div class="spec-title">NNN Charges</div>
                          <div class="spec-value">
                            ${{ TenantResult.Buybox[0].NNNCharges | number }}
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- TI Allowance -->
                    <div *ngIf="TenantResult.Buybox[0].TIAllowance">
                      <div>
                        <div class="spec-content">
                          <div class="spec-title">TI Allowance</div>
                          <div class="spec-value">
                            ${{ TenantResult.Buybox[0].TIAllowance | number }}
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Parking Spaces -->
                    <div *ngIf="TenantResult.Buybox[0].ParkingSpaces">
                      <div>
                        <div class="spec-content">
                          <div class="spec-title">Parking Spaces</div>
                          <div class="spec-value">
                            {{ TenantResult.Buybox[0].ParkingSpaces }}
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Base Rent -->
                    <div *ngIf="TenantResult.Buybox[0].BaseRent">
                      <div>
                        <div class="spec-content">
                          <div class="spec-title">Base Rent</div>
                          <div class="spec-value">
                            ${{ TenantResult.Buybox[0].BaseRent | number }}
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Building Square Footage -->
                    <div *ngIf="TenantResult.Buybox[0].BuildingSquareFootage">
                      <div>
                        <div class="spec-content">
                          <div class="spec-title">Building Square Footage</div>
                          <div class="spec-value">
                            {{ TenantResult.Buybox[0].BuildingSquareFootage }}
                            SF
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Flood Zone -->
                    <div *ngIf="TenantResult.Buybox[0].FloodZone">
                      <div>
                        <div class="spec-content">
                          <div class="spec-title">Flood Zone</div>
                          <div class="spec-value">
                            {{ TenantResult.Buybox[0].FloodZone }}
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Frontage Length -->
                    <div *ngIf="TenantResult.Buybox[0].FrontageLength">
                      <div>
                        <div class="spec-content">
                          <div class="spec-title">Frontage Length</div>
                          <div class="spec-value">
                            {{ TenantResult.Buybox[0].FrontageLength }} ft
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Historic District -->
                    <div *ngIf="TenantResult.Buybox[0].HistoricDistrict">
                      <div>
                        <div class="spec-content">
                          <div class="spec-title">Historic District</div>
                          <div class="spec-value">
                            {{ TenantResult.Buybox[0].HistoricDistrict }}
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Lot Size -->
                    <div *ngIf="TenantResult.Buybox[0].LotSize">
                      <div>
                        <div class="spec-content">
                          <div class="spec-title">Lot Size</div>
                          <div class="spec-value">
                            {{ TenantResult.Buybox[0].LotSize }} acres
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Property Condition -->
                    <div *ngIf="TenantResult.Buybox[0].PropertyCondition">
                      <div>
                        <div class="spec-content">
                          <div class="spec-title">Property Condition</div>
                          <div class="spec-value">
                            {{ TenantResult.Buybox[0].PropertyCondition }}
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Purchase Price -->
                    <div *ngIf="TenantResult.Buybox[0].PurchasePrice">
                      <div>
                        <div class="spec-content">
                          <div class="spec-title">Purchase Price</div>
                          <div class="spec-value">
                            ${{ TenantResult.Buybox[0].PurchasePrice | number }}
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Restrictions -->
                    <div *ngIf="TenantResult.Buybox[0].Restrictions">
                      <div>
                        <div class="spec-content">
                          <div class="spec-title">Restrictions</div>
                          <div class="spec-value">
                            {{ TenantResult.Buybox[0].Restrictions }}
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Service Access -->
                    <div *ngIf="TenantResult.Buybox[0].ServiceAccess">
                      <div>
                        <div class="spec-content">
                          <div class="spec-title">Service Access</div>
                          <div class="spec-value">
                            {{ TenantResult.Buybox[0].ServiceAccess }}
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Traffic Direction -->
                    <div *ngIf="TenantResult.Buybox[0].TrafficDrection">
                      <div>
                        <div class="spec-content">
                          <div class="spec-title">Traffic Direction</div>
                          <div class="spec-value">
                            {{ TenantResult.Buybox[0].TrafficDrection }}
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Vehicles Per Day -->
                    <div *ngIf="TenantResult.Buybox[0].VehiclePerDay">
                      <div>
                        <div class="spec-content">
                          <div class="spec-title">Vehicles Per Day</div>
                          <div class="spec-value">
                            {{ TenantResult.Buybox[0].VehiclePerDay }}
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Zoning -->
                    <div *ngIf="TenantResult.Buybox[0].Zoning">
                      <div>
                        <div class="spec-content">
                          <div class="spec-title">Zoning</div>
                          <div class="spec-value">
                            {{ TenantResult.Buybox[0].Zoning }}
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Other Comments -->
                    <div
                      class="col-12 mb-3"
                      *ngIf="TenantResult.Buybox[0].OtherComments"
                    >
                      <div>
                        <div class="spec-content">
                          <div class="spec-title">Other Comments</div>
                          <div class="spec-value">
                            {{ TenantResult.Buybox[0].OtherComments }}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-md-9">
              <div class="row">
                <!-- SHOPPING CENTER INFORMATION -->
                <div *ngIf="JsonPDF" class="mb-3">
                  <div class="card shoppingcentercard">
                    <div class="card-body">
                      <div class="row">
                        <div class="col-12">
                          <h4 class="ShoppingCenterInformation">
                            Shopping Center Information
                          </h4>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-4 mt-3" *ngIf="JsonPDF.CenterName">
                          <div
                            class="d-flex flex-column justify-content-center"
                          >
                            <span class="shoppingcentertitle">Center Name</span>
                            <span class="shoppingsubtitle">{{
                              JsonPDF.CenterName
                            }}</span>
                          </div>
                        </div>

                        <div class="col-4 mt-3" *ngIf="JsonPDF.CenterType">
                          <div
                            class="d-flex flex-column justify-content-center"
                          >
                            <span class="shoppingcentertitle">Center Type</span>
                            <span class="shoppingsubtitle">{{
                              JsonPDF.CenterType || "N/A"
                            }}</span>
                          </div>
                        </div>

                        <div class="col-4 mt-3" *ngIf="JsonPDF.CenterAddress">
                          <div
                            class="d-flex flex-column justify-content-center"
                          >
                            <span class="shoppingcentertitle">Address</span>
                            <span class="shoppingsubtitle"
                              >{{ JsonPDF.CenterAddress }},
                              {{ JsonPDF.CenterCity }},
                              {{ JsonPDF.CenterState }}</span
                            >
                          </div>
                        </div>

                        <div
                          class="col-4 mt-3"
                          *ngIf="JsonPDF.TotalAvailableSpace_SF"
                        >
                          <div
                            class="d-flex flex-column justify-content-center"
                          >
                            <span class="shoppingcentertitle"
                              >Available Space</span
                            >
                            <span class="shoppingsubtitle"
                              >{{ JsonPDF.TotalAvailableSpace_SF }} SF</span
                            >
                          </div>
                        </div>

                        <div class="col-4 mt-3" *ngIf="JsonPDF.percentage">
                          <div
                            class="d-flex flex-column justify-content-center"
                          >
                            <span class="shoppingcentertitle">Percentage</span>
                            <span class="shoppingsubtitle"
                              >{{ JsonPDF.percentage }}%</span
                            >
                          </div>
                        </div>

                        <div class="col-4 mt-3" *ngIf="JsonPDF.reason">
                          <div
                            class="d-flex flex-column justify-content-center"
                          >
                            <span class="shoppingcentertitle">Reason</span>
                            <span class="shoppingsubtitle">
                              <div [ngClass]="{ truncate: !showFullReason }">
                                {{ JsonPDF.reason }}
                              </div>
                              <span
                                (click)="toggleReason()"
                                class="toggle-link"
                              >
                                {{ showFullReason ? "View Less" : "View More" }}
                              </span>
                            </span>
                          </div>
                        </div>

                        <div class="col-4 mt-3" *ngIf="JsonPDF.CenterCounty">
                          <div
                            class="d-flex flex-column justify-content-center"
                          >
                            <span class="shoppingcentertitle"
                              >Center County</span
                            >
                            <span class="shoppingsubtitle">{{
                              JsonPDF.CenterCounty
                            }}</span>
                          </div>
                        </div>

                        <div class="col-4 mt-3" *ngIf="JsonPDF.ZipCode">
                          <div
                            class="d-flex flex-column justify-content-center"
                          >
                            <span class="shoppingcentertitle">Zip Code</span>
                            <span class="shoppingsubtitle">{{
                              JsonPDF.ZipCode
                            }}</span>
                          </div>
                        </div>

                        <div class="col-4 mt-3" *ngIf="JsonPDF.LandArea_SF">
                          <div
                            class="d-flex flex-column justify-content-center"
                          >
                            <span class="shoppingcentertitle"
                              >Land Area (SF)</span
                            >
                            <span class="shoppingsubtitle">{{
                              JsonPDF.LandArea_SF
                            }}</span>
                          </div>
                        </div>

                        <div
                          class="col-4 mt-3"
                          *ngIf="JsonPDF.NumberOfPropertiesInCenter"
                        >
                          <div
                            class="d-flex flex-column justify-content-center"
                          >
                            <span class="shoppingcentertitle"
                              >Properties In Center</span
                            >
                            <span class="shoppingsubtitle">{{
                              JsonPDF.NumberOfPropertiesInCenter
                            }}</span>
                          </div>
                        </div>

                        <div class="col-4 mt-3" *ngIf="JsonPDF.PercentLeased">
                          <div
                            class="d-flex flex-column justify-content-center"
                          >
                            <span class="shoppingcentertitle"
                              >Percent Leased</span
                            >
                            <span class="shoppingsubtitle">{{
                              JsonPDF.PercentLeased
                            }}</span>
                          </div>
                        </div>

                        <div
                          class="col-4 mt-3"
                          *ngIf="JsonPDF.SmallestSpaceAvailable"
                        >
                          <div
                            class="d-flex flex-column justify-content-center"
                          >
                            <span class="shoppingcentertitle"
                              >Smallest Space Available</span
                            >
                            <span class="shoppingsubtitle"
                              >{{ JsonPDF.SmallestSpaceAvailable }} SF</span
                            >
                          </div>
                        </div>

                        <div class="col-4 mt-3" *ngIf="JsonPDF.NumberOfStores">
                          <div
                            class="d-flex flex-column justify-content-center"
                          >
                            <span class="shoppingcentertitle"
                              >Number of Stores</span
                            >
                            <span class="shoppingsubtitle">{{
                              JsonPDF.NumberOfStores
                            }}</span>
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div
                          class="d-flex align-items-center justify-content-between"
                        >
                          <h4 class="ShoppingCenterInformation mt-2 mb-3">
                            Availability
                          </h4>
                         <div class="d-flex align-items-center justify-content-center gap-2">
                          <div
                          *ngIf="
                            JsonPDF?.IsSubmitted === false && showButtons
                          "
                        >
                        <button class="AddAvailablebutton" (click)="toggleAddAvailability()">
                          <span class="AddAvailablebuttontext" >
                            <ng-container *ngIf="!showAddAvailabilityInput">Add Available</ng-container>
                            <ng-container *ngIf="showAddAvailabilityInput" class="xmarkicon">
                              <i class="fa-solid fa-xmark"></i>                            
                            </ng-container>
                          </span>
                        </button>
                        
                        </div>
                        <div *ngIf="showAddAvailabilityInput" class="mt-2">
                          <div class="input-group">
                            <input
                              type="number"
                              class="form-control"
                              [(ngModel)]="newAvailabilitySize"
                              placeholder="Enter space size (SF)"
                            />
                            <button
                              class="btn btn-success"
                              (click)="addNewAvailability()"
                            >
                              Add
                            </button>
                          </div>
                        </div>

                         </div>
                        </div>
                        <ul>
                          <li
                            *ngFor="let avail of JsonPDF.Availability"
                            class="list-group-item border-0 px-0"
                          >
                            <div class="form-check mt-2">
                              <input
                                type="checkbox"
                                class="form-check-input"
                                [(ngModel)]="avail.isAdded"
                                id="availCheckbox-{{ avail.id }}"
                              />
                              <label
                                class="form-check-label"
                                for="availCheckbox-{{ avail.id }}"
                              >
                                <div
                                  class="d-flex align-items-center justify-content-center gap-1"
                                >
                                  <span class="BuildingSize"
                                    >Building Size:</span
                                  >
                                  <span class="BuildingAndTenant">
                                    {{ avail.BuildingSizeSf }} SF
                                  </span>
                                </div>
                              </label>
                            </div>
                          </li>
                        </ul>
                      </div>
                      <div class="row">
                        <div
                          class="d-flex align-items-center justify-content-between"
                        >
                          <h4 class="ShoppingCenterInformation mb-3">
                            Tenants
                          </h4>
                        <div class="d-flex align-items-center justify-content-center gap-2">
                          <div
                          *ngIf="
                            JsonPDF?.IsSubmitted === false && showButtons
                          "
                        >
                        <button class="AddAvailablebutton" (click)="toggleAddTenant()">
                          <span class="AddAvailablebuttontext" >
                            <ng-container *ngIf="!showAddTenantInput">Add Tenant</ng-container>
                            <ng-container *ngIf="showAddTenantInput">
                              <i class="fa-solid fa-xmark"></i>                            
                            </ng-container>
                          </span>
                        </button>
                        </div>
                        <div *ngIf="showAddTenantInput" class="mt-2">
                          <div class="input-group">
                            <input
                              type="text"
                              class="form-control"
                              [(ngModel)]="newTenantName"
                              placeholder="Enter tenant name"
                            />
                            <button
                              class="btn btn-success"
                              (click)="addNewTenant()"
                            >
                              Add
                            </button>
                          </div>
                        </div>
                        </div>
                        </div>
                        <ul>
                          <li
                            *ngFor="let tenant of JsonPDF.Tenants"
                            class="list-group-item border-0 px-0"
                          >
                            <div class="form-check mt-2">
                              <input
                                type="checkbox"
                                class="form-check-input"
                                [(ngModel)]="tenant.isAdded"
                                id="tenantCheckbox-{{ tenant.id }}"
                              />
                              <label
                                class="BuildingAndTenant"
                                for="tenantCheckbox-{{ tenant.id }}"
                              >
                                {{ tenant.Name }}
                                <a
                                  *ngIf="tenant.OrgUrl"
                                  [href]="tenant.OrgUrl"
                                  target="_blank"
                                  class="tenant-link"
                                >
                                  (Website)
                                </a>
                              </label>
                            </div>
                          </li>
                        </ul>
                      </div>
                    </div>
                    <div
                      class="col-12 d-flex align-items-center justify-content-end paddingsubmitpdf"
                    >
                      <button
                        class="submitpdfbutton"
                        *ngIf="JsonPDF?.IsSubmitted === false"
                        (click)="sendJson()"
                      >
                        Approve Data
                      </button>
                    </div>
                  </div>
                </div>
                 <!-- File name and progress bar section -->
                 <div class="filenameouterframe" *ngIf="fileName">
                  <div class="filenameinnerframe">
                    <div
                      class="d-flex align-items-center justify-content-between uploaded-file-container"
                    >
                      <div class="filename">{{ fileName }}</div>
                      <!-- <button
                        class="clear-button"
                        (click)="clearModalData()"
                      >
                        Clear
                      </button> -->
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-4">
                  <div class="card submitproposelsize">
                    <div class="card-body">
                      <div
                        class="d-flex align-items-center justify-content-center"
                      >
                        <span class="submitnewproposel"
                          >Another Shopping Center ?</span
                        >
                      </div>
                      <div class="outer-frame">
                        <div
                          class="inner-frame d-flex flex-column align-items-center justify-content-center"
                        >
                          <div>
                            <img
                              src="../../../../assets/Images/Icons/information.png"
                              alt="Upload Icon"
                            />
                          </div>
                          <div>
                            <span class="upload-text"
                              >Just upload your <strong>Proposal</strong> file,
                              and weâ€™ll handle the rest!</span
                            >
                          </div>
                          <div>
                            <span class="upload-text"
                              >PDF, DOCX, XLSX, PPTX</span
                            >
                          </div>
                        </div>
                        <div
                          class="d-flex flex-column gap-4 align-items-center justify-content-center"
                        >
                          <div>
                            <img
                              class="uploadimg"
                              src="../../../../assets/Images/Icons/UploadIcon.png"
                              alt=""
                            />
                          </div>
                        </div>
                        <div
                          class="d-flex align-items-center justify-content-center"
                        >
                          <span class="uploadspan"
                            >Upload or drag and drop your file here.</span
                          >
                        </div>
                        <ngx-file-drop
                          class="dropzonee hidden-dropzone"
                          dropZoneLabel="Drop files here"
                          (onFileDrop)="uploadFile($event)"
                          [dropZoneClassName]="'upload-background-image'"
                        >
                          <ng-template
                            ngx-file-drop-content-tmp
                            let-openFileSelector="openFileSelector"
                          >
                            <div
                              class="upload-container cursor"
                              (click)="openFileSelector()"
                            >
                              <div
                                class="d-flex align-items-center justify-content-center"
                              >
                                <div class="uploadbtn cursor">
                                  <img
                                    src="../../../../assets/Images/Icons/choosefile.png"
                                  />
                                  <span>Submit Brochure</span>
                                </div>
                              </div>
                            </div>
                          </ng-template>
                        </ngx-file-drop>
                       
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Progress Bar -->
                <div *ngIf="isUploading" class="mt-3">
                  <div class="progress">
                    <div
                      class="progress-bar progress-bar-striped"
                      role="progressbar"
                      [style.width]="uploadProgress + '%'"
                      [attr.aria-valuenow]="uploadProgress"
                      aria-valuemin="0"
                      aria-valuemax="100"
                    >
                      {{ uploadProgress }}%
                    </div>
                  </div>
                  <p class="text-center mt-2">Uploading...</p>
                </div>
                <div
                  class="col-md-4"
                  *ngFor="let shopping of shoppingCenterManage"
                >
                  <div class="card shoppingcentersize">
                    <img
                      class="card-img-top"
                      [src]="
                        shopping?.MainImage ||
                        '../../../../assets/Images/mall.jpg'
                      "
                      alt="Main Image"
                    />

                    <div class="card-body">
                      <h5 class="centrename">{{ shopping.CenterName }}</h5>
                      <h5 class="address">
                        {{ shopping.CenterAddress }},{{ shopping.CenterCity }},
                        {{ shopping.CenterState }}
                      </h5>

                      <div
                        class="d-flex flex-column gap-2"
                        *ngIf="shoppingCenterManage[0].O[0].P"
                      >
                        <!-- Lease Prices Section -->
                        <span class="title-2"> Purchase Price: </span>
                        <div class="d-flex align-items-center gap-2 my-2">
                          <img
                            src="../../../../assets/Images/purchaseprice.png"
                            alt=""
                          />

                          <ng-container *ngIf="isAllForLeasePriceZero()">
                            <span class="title"> On Request </span>
                          </ng-container>

                          <ng-container *ngIf="!isAllForLeasePriceZero()">
                            <!-- Display first 3 lease prices -->
                            <ng-container
                              *ngFor="
                                let place of getFirstThreeLeasePrices();
                                let last = last
                              "
                            >
                              <span class="title">
                                {{ place.ForLeasePrice }}
                              </span>
                              <span *ngIf="!last"> - </span>
                            </ng-container>

                            <!-- View More button if more than 3 lease prices -->
                            <a
                              *ngIf="getLeasePricesCount() > 3"
                              class="text-primary cursor ms-1"
                              (click)="openLeasePricesModal()"
                            >
                              ({{ getLeasePricesCount() - 3 }} more)
                            </a>
                          </ng-container>

                          <span
                            class="subtitle"
                            *ngIf="!isAllForLeasePriceZero()"
                          >
                            ($)
                          </span>
                        </div>

                        <!-- Available Spaces Section -->
                        <div class="d-flex flex-column gap-1">
                          <span class="title-2"> Available Spaces: </span>
                          <div class="d-flex align-items-center gap-2 my-2">
                            <img
                              src="../../../../assets/Images/size.png"
                              alt=""
                            />

                            <!-- Display first 3 building sizes -->
                            <ng-container
                              *ngFor="
                                let place of getFirstThreeBuildingSizes();
                                let last = last
                              "
                            >
                              <div class="building-sizes-wrapper">
                                <span class="availabletitle">
                                  {{ place.BuildingSizeSf | number }} SF
                                  <span style="font-weight: 500" *ngIf="!last">
                                    -
                                  </span>
                                </span>
                              </div>
                            </ng-container>

                            <!-- View More button if more than 3 building sizes -->
                            <a
                              *ngIf="getBuildingSizeCount() > 3"
                              class="text-primary cursor ms-1"
                              (click)="openBuildingSizesModal()"
                            >
                              ({{ getBuildingSizeCount() - 3 }} more)
                            </a>
                          </div>
                        </div>
                      </div>

                      <div class="d-flex align-items-center gap-2 mb-2">
                        <img
                          src="../../../../assets/Images/availableunits.png"
                          alt=""
                        />
                        <span class="title">
                          {{ getBuildingSizeCount() }}
                        </span>
                        <span class="subtitle"> Available Units </span>
                      </div>

                      <div class="line"></div>
                      <div class="mt-2">
                        <span class="managedBy">Managed By</span>
                      </div>
                      <div class="d-flex align-content-center gap-2">
                        <img
                          *ngIf="OrganizationContacts[0]"
                          class="logo"
                          src="https://api.cherrypick.com/api/Organization/GetOrgImag?orgId={{
                            OrganizationContacts[0].id
                          }}"
                          [title]="OrganizationContacts[0].name"
                          alt=""
                        />
                        <div
                          class="organizationName"
                          *ngIf="OrganizationContacts[0]"
                        >
                          {{ OrganizationContacts[0].name }}
                        </div>
                        <img
                          class="cursor eyeimage"
                          src="../../../assets/Images/Icons/eye.png"
                          alt="View Manager Details"
                          [ngbPopover]="popoverContent"
                          popoverTitle="Organization Contact Info"
                          triggers="click:outside"
                          [placement]="'top'"
                        />
                      </div>
                    </div>

                    <div class="twobuttons">
                      <button
                        class="SubmitBrochure w-100"
                        (click)="fileDrop.openFileSelector()"
                      >
                        <ngx-file-drop
                          #fileDrop
                          class="dropzonee hidden-dropzone w-100"
                          dropZoneLabel="Drop files here"
                          (onFileDrop)="uploadFile($event)"
                          [dropZoneClassName]="'upload-background-image'"
                        >
                          <ng-template
                            ngx-file-drop-content-tmp
                            let-openFileSelector="openFileSelector"
                          >
                            <div class="upload-container cursor w-100">
                              <div
                                class="d-flex align-items-center justify-content-center w-100"
                              >
                                <div class="submitbronchure cursor w-100">
                                  <span>Submit Brochure</span>
                                </div>
                              </div>
                            </div>
                          </ng-template>
                        </ngx-file-drop>
                      </button>

                      <button
                        class="ManualSubmission mt-2 w-100"
                        (click)="openShoppingModal(shopping.Id)"
                      >
                        Manual Submission
                      </button>
                    </div>
                  </div>
                </div>
                <div
                  class="col-md-4"
                  *ngFor="let shopping of shoppingCenterManageSubmitted"
                >
                  <div class="card shoppingcentersize">
                    <img
                      class="card-img-top"
                      [src]="
                        shopping?.MainImage ||
                        '../../../../assets/Images/mall.jpg'
                      "
                      alt="Main Image"
                    />

                    <div class="card-body">
                      <h5 class="centrename">{{ shopping.CenterName }}</h5>
                      <h5 class="address">
                        {{ shopping.CenterAddress }},{{ shopping.CenterCity }},
                        {{ shopping.CenterState }}
                      </h5>

                      <div
                        class="d-flex flex-column gap-2"
                        *ngIf="shoppingCenterManageSubmitted[0].O[0].P"
                      >
                        <div class="title-2">Purchase Price:</div>

                        <div class="d-flex align-items-center gap-2">
                          <img
                            src="../../../../assets/Images/purchaseprice.png"
                            alt=""
                          />

                          <ng-container *ngIf="isAllForLeasePriceZeroSub()">
                            <span class="title"> On Request </span>
                          </ng-container>

                          <ng-container
                            *ngIf="
                              shoppingCenterManageSubmitted?.length &&
                              shoppingCenterManageSubmitted[0]?.O?.length &&
                              shoppingCenterManageSubmitted[0].O[0]?.P?.length
                            "
                          >
                            <ng-container
                              *ngIf="
                                filteredLeasePlaces(
                                  shoppingCenterManageSubmitted[0].O[0].P
                                ) as leasePlaces
                              "
                            >
                              <div class="lease-prices-wrapper">
                                <!-- Display first 3 lease prices -->
                                <ng-container
                                  *ngFor="
                                    let place of leasePlaces.slice(0, 3);
                                    let last = last
                                  "
                                >
                                  <span class="title d-inline-block">
                                    {{ place.ForLeasePrice }}$
                                  </span>
                                  <span *ngIf="!last"> - </span>
                                </ng-container>

                                <!-- View More button if more than 3 lease prices -->
                                <div *ngIf="leasePlaces.length > 3">
                                  <a
                                    class="text-primary cursor ms-1 d-inline-block"
                                    (click)="
                                      openLeasePricesSubmissionModal(
                                        leasePlaces
                                      )
                                    "
                                  >
                                    View More ({{
                                      leasePlaces.length - 3
                                    }}
                                    more)
                                  </a>
                                </div>
                              </div>
                            </ng-container>
                          </ng-container>

                          <!-- <span class="subtitle" *ngIf="!isAllForLeasePriceZeroSub()">
                          ($)
                        </span> -->
                        </div>

                        <div class="d-flex flex-column gap-1">
                          <span class="title-2"> Available Spaces: </span>
                          <div class="d-flex align-items-center gap-2 my-2">
                            <img
                              src="../../../../assets/Images/size.png"
                              alt=""
                            />
                            <ng-container
                              *ngIf="
                                shoppingCenterManageSubmitted[0].O[0]
                                  .P as places
                              "
                            >
                              <!-- Display first 3 items -->
                              <div class="building-sizes-wrapper">
                                <ng-container
                                  *ngFor="
                                    let place of places.slice(0, 3);
                                    let last = last
                                  "
                                >
                                  <span class="availabletitle d-inline-block">
                                    {{ place.BuildingSizeSf | number }} SF
                                  </span>
                                  <span *ngIf="!last"> - </span>
                                </ng-container>

                                <!-- View More button if more than 3 places -->
                                <div *ngIf="places.length > 3">
                                  <a
                                    class="text-primary cursor ms-1 d-inline-block"
                                    (click)="
                                      openBuildingSizesSubmissionModal(places)
                                    "
                                  >
                                    View More ({{ places.length - 3 }} more)
                                  </a>
                                </div>
                              </div>
                            </ng-container>
                          </div>
                        </div>
                      </div>
                      <div class="d-flex align-items-center gap-2 mb-2">
                        <img
                          src="../../../../assets/Images/availableunits.png"
                          alt=""
                        />
                        <span class="title">
                          {{ getBuildingSizeCountSub() }}
                        </span>
                        <span class="subtitle"> Available Units </span>
                      </div>

                      <div class="line"></div>
                      <div class="mt-2">
                        <span class="managedBy">Managed By</span>
                      </div>
                      <div class="d-flex align-content-center gap-2">
                        <img
                          *ngIf="OrganizationContacts[0]"
                          class="logo"
                          src="https://api.cherrypick.com/api/Organization/GetOrgImag?orgId={{
                            OrganizationContacts[0].id
                          }}"
                          [title]="OrganizationContacts[0].name"
                          alt=""
                        />
                        <div
                          class="organizationName"
                          *ngIf="OrganizationContacts[0]"
                        >
                          {{ OrganizationContacts[0].name }}
                        </div>
                        <img
                          class="cursor eyeimage"
                          src="../../../assets/Images/Icons/eye.png"
                          alt="View Manager Details"
                          [ngbPopover]="popoverContent"
                          popoverTitle="Organization Contact Info"
                          triggers="click:outside"
                          [placement]="'top'"
                        />
                      </div>
                    </div>

                    <div class="twobuttons">
                      <button
                        class="SubmitBrochure w-100"
                        (click)="fileDrop.openFileSelector()"
                      >
                        <ngx-file-drop
                          #fileDrop
                          class="dropzonee hidden-dropzone w-100"
                          dropZoneLabel="Drop files here"
                          (onFileDrop)="uploadFile($event)"
                          [dropZoneClassName]="'upload-background-image'"
                        >
                          <ng-template
                            ngx-file-drop-content-tmp
                            let-openFileSelector="openFileSelector"
                          >
                            <div class="upload-container cursor w-100">
                              <div
                                class="d-flex align-items-center justify-content-center w-100"
                              >
                                <div class="submitbronchure cursor w-100">
                                  <span>Submit Brochure</span>
                                </div>
                              </div>
                            </div>
                          </ng-template>
                        </ngx-file-drop>
                      </button>

                      <button
                        class="ManualSubmission mt-2 w-100"
                        (click)="openShoppingModal(shopping.Id)"
                      >
                        Manual Submission
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-12 mt-3">
                <div
                  class="mapDesign"
                  #mapContainer
                  id="map"
                  style="width: 100%; height: 400px"
                ></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #uploadPDF let-modal>
  <!-- Display Images Section -->
  <div
    *ngIf="images.length > 0 && !isSubmitting"
    class="extractedimagespadding"
  >
    <h4 class="my-prop">Converted Pdf to Extracted Images</h4>
    <div class="row">
      <div *ngFor="let image of images" class="col-md-4 mb-3">
        <div class="card">
          <div class="form-check m-2 mb-0">
            <input
              type="checkbox"
              class="form-check-input input-sty"
              style="border: 2px solid #cbcbcb"
              [(ngModel)]="image.selected"
              id="checkbox-{{ image.name }}"
            />
            <label class="form-check-label" for="checkbox-{{ image.name }}">
            </label>
          </div>
          <img
            [src]="displayCustomImage(image)"
            [alt]="image.name"
            class="img-fluid gpt-image"
          />
          <div class="card-body">
            <p class="text-center mt-2">{{ image.name }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Display JsonPDF Data Section -->
  <div *ngIf="!returnsubmit" class="marginleft">
    <div class="col-4">
      <button
        class="submit-button"
        (click)="sendImagesArray()"
        [disabled]="!isFileUploaded"
        [ngClass]="{ 'submit-button-enabled': isFileUploaded }"
      >
        Submit
      </button>
    </div>
  </div>
</ng-template>
<div id="customToast" class="custom-toast">
  <div class="toast-content">
    <p id="toastMessage"></p>
  </div>
</div>

<ng-template #openShopping let-modal>
  <div class="modal-header bg-light border-bottom">
    <h4 class="w-100 text-center" style="font-weight: 600">
      {{ CustomPlace?.CenterName }}
    </h4>
    <button
      type="button"
      class="btn-close"
      aria-label="Close"
      (click)="modal.dismiss()"
    ></button>
  </div>
  <div class="modal-body p-4" style="overflow: auto; max-height: 80vh">
    <div class="container-fluid">
      <div class="row m-0 g-3 align-items-start">
        <!-- Images Section -->
        <!-- <div class="col-md-6">
          <div class="image-container rounded shadow-sm">
            <div
              *ngIf="getImagesArray().length > 1; else singleImage"
              class="carousel-container"
            >
              <div
                id="propertyCarousel"
                class="carousel slide"
                data-bs-ride="carousel"
              >
                <div class="carousel-inner">
                  <div *ngFor="let imageUrl of getImagesArray(); let i = index" class="carousel-item"
                    [ngClass]="{'active': i === 0}">
                    <img [src]="imageUrl" alt="Property Image" class="d-block w-100 rounded">
                  </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#propertyCarousel"
                  data-bs-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#propertyCarousel"
                  data-bs-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Next</span>
                </button>
              </div>
            </div>
            <ng-template #singleImage>
              <img
                [src]="getImagesArray()[0]"
                alt="Property Image"
                class="img-fluid rounded shadow-sm"
              />
            </ng-template>
          </div>
        </div> -->
        <!-- Details Section -->
        <div class="col-md-12">
          <div class="details-container p-3 bg-light rounded shadow-sm">
            <p class="mb-3" style="color: #7a8591">
              <b>Address:</b> {{ CustomPlace?.CenterAddress }},
              {{ CustomPlace?.CenterCity }}, {{ CustomPlace?.CenterState }}
              {{ CustomPlace?.ZipCode }}
            </p>
            <!-- Avalibitlty Section -->
            <div class="d-flex justify-content-between align-items-center mb-2">
              <h6 style="color: #7a8591"><b>Available Spaces</b></h6>
              <i
                class="fa-solid fa-plus cursor-pointer text-primary"
                style="cursor: pointer"
                (click)="toggleAddPlaceInput()"
              ></i>
            </div>

            <div class="mb-4" *ngIf="CustomPlace?.Availability">
              <div
                *ngFor="let space of CustomPlace?.Availability; let i = index"
                class="py-2 border-bottom"
              >
                <div class="d-flex justify-content-between align-items-center">
                  <span style="color: #7a8591"
                    >{{ space.BuildingSizeSf }} sqft</span
                  >
                  <div>
                    <!-- <button class="btn_edit mx-1" (click)="startEditPlace(space.Id, space.BuildingSizeSf, i)">
                      <i class="fa-regular fa-pen-to-square text-secondary d-flex justify-content-center"></i>
                    </button> -->

                    <button
                      class="btn_trash"
                      (click)="openDeletePlaceModal(space.Id)"
                      data-bs-toggle="modal"
                      data-bs-target="#deletePlaceModal"
                    >
                      <i
                        class="fa fa-trash text-danger d-flex justify-content-center"
                      ></i>
                    </button>
                  </div>
                </div>

                <!-- Input field for editing the space -->
                <!-- <div *ngIf="editingPlaceId === space.Id && showEditInput" class="mt-3 d-flex align-items-center gap-2">
                  <input type="number" class="form-control" placeholder="Edit square footage"
                    [(ngModel)]="editedPlaceSqFT" min="1">
                  <button class="btn btn-success btn-sm" (click)="saveEditedPlace(space.Id)">
                    Save
                  </button>
                  <button class="btn btn-danger btn-sm" (click)="cancelEditPlace()">
                    Cancel
                  </button>
                </div> -->
              </div>

              <div
                *ngIf="showAddPlaceInput"
                class="mt-3 d-flex align-items-center gap-2"
              >
                <input
                  type="number"
                  class="form-control"
                  placeholder="Enter square footage"
                  [(ngModel)]="newPlaceSqFT"
                  min="1"
                />
                <button class="btn btn-success btn-sm" (click)="addNewPlace()">
                  Add
                </button>
                <button
                  class="btn btn-danger btn-sm"
                  (click)="cancelAddPlace()"
                >
                  Cancel
                </button>
              </div>
            </div>

            <div class="d-flex justify-content-between align-items-center mb-2">
              <h6 style="color: #7a8591"><b>Tenants</b></h6>
              <i
                class="fa-solid fa-plus cursor-pointer text-primary"
                style="cursor: pointer"
                (click)="toggleAddTenantInput()"
              ></i>
            </div>
            <div *ngIf="CustomPlace?.Tenants">
              <div
                *ngFor="let tenant of CustomPlace?.Tenants"
                class="d-flex justify-content-between align-items-center py-2 border-bottom"
              >
                <span style="color: #7a8591"
                  >{{ tenant.Name }} -
                  <a
                    *ngIf="tenant.URL"
                    [href]="tenant.URL"
                    target="_blank"
                    class="tenant-link"
                  >
                    {{ tenant.URL }}
                  </a>
                </span>
                <button
                  class="btn_trash"
                  (click)="openDeleteTenantModal(tenant.Id)"
                  data-bs-toggle="modal"
                  data-bs-target="#deletePlaceModal"
                >
                  <i
                    class="fa fa-trash text-danger d-flex justify-content-center"
                  ></i>
                </button>
              </div>

              <div
                *ngIf="showAddTenantInput"
                class="mt-3 d-flex align-items-center gap-2"
              >
                <div class="d-flex align-items-center gap-2">
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Organization name"
                    [(ngModel)]="newNameTenant"
                    required
                  />
                </div>
                <div class="d-flex align-items-center gap-2">
                  <input
                    type="text"
                    class="form-control"
                    placeholder="URL (example.com)"
                    [(ngModel)]="newUrlTenant"
                    #tenantUrl="ngModel"
                    required
                    pattern="[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+"
                  />
                  <div
                    *ngIf="
                      tenantUrl.invalid &&
                      (tenantUrl.dirty || tenantUrl.touched)
                    "
                    class="text-danger small mt-1"
                  >
                    Please enter a valid domain (e.g., example.com)
                  </div>
                </div>
                <button class="btn btn-success btn-sm" (click)="addTenantNew()">
                  Add
                </button>
                <button
                  class="btn btn-danger btn-sm"
                  (click)="cancelAddTenant()"
                >
                  Cancel
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #popoverContent>
  <div
    *ngFor="let org of OrganizationContacts"
    class="contact-container table-text"
  >
    <p class="text-bold m-0">
      {{ org.firstname | titlecase }}
      {{ org.lastname | titlecase }}
    </p>
    <p class="m-0">{{ org.cellPhone }}</p>
    <p class="m-0">{{ org.email }}</p>
    <hr *ngIf="!isLast(org, OrganizationContacts)" />
  </div>
</ng-template>
<ng-template #deletePlaceModal let-modal>
  <div
    class="modal-body-general p-4 rounded"
    style="
      background-color: #f8f9fa;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    "
  >
    <h2
      class="text-center mb-4"
      style="font-size: 1.5rem; font-weight: bold; color: var(--app-color)"
    >
      Delete {{ deleteType }}
    </h2>
    <p class="text-center" style="font-size: 1rem; color: #6c757d">
      Are you sure you want to delete this {{ deleteType }}?
    </p>

    <div class="d-flex justify-content-center mt-4">
      <button
        type="button"
        class="btn btn-secondary me-4 px-4 py-2"
        (click)="modal.dismiss('Cancel click')"
        style="border-radius: 4px"
      >
        Cancel
      </button>
      <button
        type="button"
        class="btn btn-danger px-4 py-2"
        (click)="confirmDelete(modal)"
        style="border-radius: 4px"
      >
        Delete
      </button>
    </div>
  </div>
</ng-template>

<!-- Lease Prices Modal -->
<ng-template #leasePricesModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title">All Lease Prices</h4>
    <button
      type="button"
      class="btn-close"
      aria-label="Close"
      (click)="modal.dismiss()"
    ></button>
  </div>
  <div class="modal-body" style="overflow-y: auto; max-height: 75vh">
    <div *ngFor="let place of filteredLeasePlacesManage" class="mb-2">
      {{ place.ForLeasePrice }} $
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modal.close()">
      Close
    </button>
  </div>
</ng-template>
<!-- Building Sizes Modal -->
<ng-template #buildingSizesModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title">All Building Sizes</h4>
    <button
      type="button"
      class="btn-close"
      aria-label="Close"
      (click)="modal.dismiss()"
    ></button>
  </div>
  <div class="modal-body" style="overflow-y: auto; max-height: 75vh">
    <div *ngFor="let place of allBuildingSizes" class="mb-2">
      {{ place.BuildingSizeSf | number }} SF
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modal.close()">
      Close
    </button>
  </div>
</ng-template>

<!-- second card -->

<!-- Modal for displaying all building sizes Submission -->
<ng-template #buildingSizesSubmissionModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title">All Building Sizes</h4>
    <button
      type="button"
      class="btn-close"
      aria-label="Close"
      (click)="modal.dismiss()"
    ></button>
  </div>
  <div class="modal-body" style="overflow-y: auto; max-height: 75vh">
    <div *ngFor="let place of modalPlaces" class="mb-2">
      {{ place.BuildingSizeSf | number }} SF
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modal.close()">
      Close
    </button>
  </div>
</ng-template>
<!-- Modal for displaying all lease prices Submission-->
<ng-template #leasePricesSubmissionModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title">All Lease Prices</h4>
    <button
      type="button"
      class="btn-close"
      aria-label="Close"
      (click)="modal.dismiss()"
    ></button>
  </div>
  <div class="modal-body" style="overflow-y: auto; max-height: 75vh">
    <div *ngFor="let place of modalLeasePlaces" class="mb-2">
      {{ place.ForLeasePrice }} $
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modal.close()">
      Close
    </button>
  </div>
</ng-template>
