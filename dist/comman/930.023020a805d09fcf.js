"use strict";(self.webpackChunkcomman=self.webpackChunkcomman||[]).push([[930],{4930:(ue,h,l)=>{l.r(h),l.d(h,{LandlordModule:()=>_e});var _=l(177),u=l(483),m=l(1626),e=l(4438),f=l(6554),C=l(4700),v=l(3259),x=l(345),F=l(493),c=l(9417),P=l(8928);const I=["uploadPDF"],M=["openShopping"],k=["deletePlaceModal"],T=n=>({active:n});function j(n,a){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"td",21),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.openShoppingModal(i.id))}),e.EFF(2),e.k0s(),e.j41(3,"td",22),e.EFF(4),e.k0s(),e.j41(5,"td",22),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"div",23),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.openUploadModal(i.id))}),e.EFF(9," Upload "),e.nrm(10,"i",24),e.k0s()()()}if(2&n){const t=a.$implicit;e.R7$(2),e.JRh(t.centerName),e.R7$(2),e.E5c(" ",t.centerAddress,", ",t.centerCity,", ",t.centerState," "),e.R7$(2),e.JRh(t.zipCode)}}function y(n,a){if(1&n&&(e.j41(0,"h1",44),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.fileName," ")}}function S(n,a){if(1&n){const t=e.RV6();e.j41(0,"b")(1,"span",45),e.EFF(2," Drop File Here "),e.k0s()(),e.j41(3,"button",46),e.bIt("click",function(){const i=e.eBV(t).openFileSelector;return e.Njj(i())}),e.EFF(4," Browse Files "),e.k0s()}}function w(n,a){if(1&n&&(e.j41(0,"div",47)(1,"div",48)(2,"div",49),e.EFF(3),e.k0s()(),e.j41(4,"p",50),e.EFF(5,"Uploading..."),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(2),e.xc7("width",t.uploadProgress+"%"),e.BMQ("aria-valuenow",t.uploadProgress),e.R7$(),e.SpI(" ",t.uploadProgress,"% ")}}function D(n,a){1&n&&(e.j41(0,"div",47)(1,"div",51)(2,"div",52)(3,"span",53),e.EFF(4,"Loading..."),e.k0s()(),e.j41(5,"p",54),e.EFF(6,"Converting PDF to images..."),e.k0s()()())}function E(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",58)(1,"div",59)(2,"div",60)(3,"input",61),e.mxI("ngModelChange",function(i){const s=e.eBV(t).$implicit;return e.DH7(s.selected,i)||(s.selected=i),e.Njj(i)}),e.k0s(),e.nrm(4,"label",62),e.k0s(),e.nrm(5,"img",63),e.j41(6,"div",64)(7,"p",50),e.EFF(8),e.k0s()()()()}if(2&n){const t=a.$implicit,o=e.XpG(3);e.R7$(3),e.Mz_("id","checkbox-",t.name,""),e.R50("ngModel",t.selected),e.R7$(),e.Mz_("for","checkbox-",t.name,""),e.R7$(),e.Y8G("src",o.displayCustomImage(t),e.B4B)("alt",t.name),e.R7$(3),e.JRh(t.name)}}function G(n,a){if(1&n&&(e.j41(0,"div")(1,"h4",55),e.EFF(2,"Extracted Images"),e.k0s(),e.j41(3,"div",56),e.DNE(4,E,9,8,"div",57),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(4),e.Y8G("ngForOf",t.images)}}function R(n,a){if(1&n&&(e.qex(0),e.j41(1,"dt",81),e.EFF(2,"Center Name:"),e.k0s(),e.j41(3,"dd",82),e.EFF(4),e.k0s(),e.bVm()),2&n){const t=e.XpG(3);e.R7$(4),e.JRh(t.JsonPDF.CenterName)}}function N(n,a){if(1&n&&(e.qex(0),e.j41(1,"dt",81),e.EFF(2,"Center Type:"),e.k0s(),e.j41(3,"dd",82),e.EFF(4),e.k0s(),e.bVm()),2&n){const t=e.XpG(3);e.R7$(4),e.JRh(t.JsonPDF.CenterType)}}function A(n,a){if(1&n&&(e.qex(0),e.j41(1,"dt",81),e.EFF(2,"Address:"),e.k0s(),e.j41(3,"dd",82),e.EFF(4),e.k0s(),e.bVm()),2&n){const t=e.XpG(3);e.R7$(4),e.JRh(t.JsonPDF.CenterAddress)}}function $(n,a){if(1&n&&(e.qex(0),e.j41(1,"dt",81),e.EFF(2,"City:"),e.k0s(),e.j41(3,"dd",82),e.EFF(4),e.k0s(),e.bVm()),2&n){const t=e.XpG(3);e.R7$(4),e.JRh(t.JsonPDF.CenterCity)}}function B(n,a){if(1&n&&(e.qex(0),e.j41(1,"dt",81),e.EFF(2,"State:"),e.k0s(),e.j41(3,"dd",82),e.EFF(4),e.k0s(),e.bVm()),2&n){const t=e.XpG(3);e.R7$(4),e.JRh(t.JsonPDF.CenterState)}}function O(n,a){if(1&n&&(e.qex(0),e.j41(1,"dt",81),e.EFF(2,"Available Space (SF):"),e.k0s(),e.j41(3,"dd",82),e.EFF(4),e.k0s(),e.bVm()),2&n){const t=e.XpG(3);e.R7$(4),e.JRh(t.JsonPDF.TotalAvailableSpace_SF)}}function V(n,a){if(1&n){const t=e.RV6();e.j41(0,"li",83)(1,"div",84)(2,"input",85),e.mxI("ngModelChange",function(i){const s=e.eBV(t).$implicit;return e.DH7(s.isAdded,i)||(s.isAdded=i),e.Njj(i)}),e.k0s(),e.j41(3,"label",62)(4,"strong"),e.EFF(5,"Building Size:"),e.k0s(),e.EFF(6),e.k0s()()()}if(2&n){const t=a.$implicit;e.R7$(2),e.Mz_("id","availCheckbox-",t.id,""),e.R50("ngModel",t.isAdded),e.R7$(),e.Mz_("for","availCheckbox-",t.id,""),e.R7$(3),e.SpI(" ",t.BuildingSizeSf," SF ")}}function X(n,a){if(1&n&&(e.j41(0,"div",75)(1,"div",76)(2,"div",77)(3,"h5",78),e.EFF(4,"Availability"),e.k0s()(),e.j41(5,"div",64)(6,"ul",79),e.DNE(7,V,7,6,"li",80),e.k0s()()()()),2&n){const t=e.XpG(3);e.R7$(7),e.Y8G("ngForOf",t.JsonPDF.Availability)}}function U(n,a){if(1&n&&(e.j41(0,"a",87),e.EFF(1," (Website) "),e.k0s()),2&n){const t=e.XpG().$implicit;e.Y8G("href",t.OrgUrl,e.B4B)}}function J(n,a){if(1&n){const t=e.RV6();e.j41(0,"li",83)(1,"div",84)(2,"input",85),e.mxI("ngModelChange",function(i){const s=e.eBV(t).$implicit;return e.DH7(s.isAdded,i)||(s.isAdded=i),e.Njj(i)}),e.k0s(),e.j41(3,"label",62),e.EFF(4),e.DNE(5,U,2,1,"a",86),e.k0s()()()}if(2&n){const t=a.$implicit;e.R7$(2),e.Mz_("id","tenantCheckbox-",t.id,""),e.R50("ngModel",t.isAdded),e.R7$(),e.Mz_("for","tenantCheckbox-",t.id,""),e.R7$(),e.SpI(" ",t.Name," "),e.R7$(),e.Y8G("ngIf",t.OrgUrl)}}function z(n,a){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"textarea",88),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG(3);return e.DH7(s.Notes,i)||(s.Notes=i),e.Njj(i)}),e.EFF(2,"                "),e.k0s()()}if(2&n){const t=e.XpG(3);e.R7$(),e.R50("ngModel",t.Notes)}}function Y(n,a){if(1&n&&(e.j41(0,"div",65)(1,"div",66)(2,"div",67)(3,"div",68)(4,"div",69)(5,"h4",70),e.EFF(6,"Shopping Center Information"),e.k0s()(),e.j41(7,"div",64)(8,"div",56)(9,"div",71)(10,"dl",72),e.DNE(11,R,5,1,"ng-container",35)(12,N,5,1,"ng-container",35)(13,A,5,1,"ng-container",35)(14,$,5,1,"ng-container",35)(15,B,5,1,"ng-container",35)(16,O,5,1,"ng-container",35),e.k0s()()()()(),e.j41(17,"div",73),e.DNE(18,X,8,1,"div",74),e.j41(19,"div",75)(20,"div",76)(21,"div",77)(22,"h5",78),e.EFF(23,"Tenants"),e.k0s()(),e.j41(24,"div",64)(25,"ul",79),e.DNE(26,J,6,7,"li",80),e.k0s()()()(),e.DNE(27,z,3,1,"div",35),e.k0s()()()()),2&n){const t=e.XpG(2);e.R7$(11),e.Y8G("ngIf",t.JsonPDF.CenterName),e.R7$(),e.Y8G("ngIf",t.JsonPDF.CenterType),e.R7$(),e.Y8G("ngIf",t.JsonPDF.CenterAddress),e.R7$(),e.Y8G("ngIf",t.JsonPDF.CenterCity),e.R7$(),e.Y8G("ngIf",t.JsonPDF.CenterState),e.R7$(),e.Y8G("ngIf",t.JsonPDF.TotalAvailableSpace_SF),e.R7$(2),e.Y8G("ngIf",t.JsonPDF.Availability.length>0),e.R7$(8),e.Y8G("ngForOf",t.JsonPDF.Tenants),e.R7$(),e.Y8G("ngIf",t.JsonPDF)}}function q(n,a){if(1&n){const t=e.RV6();e.j41(0,"button",89),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.sendImagesArray())}),e.EFF(1," Convert Images "),e.k0s()}}function L(n,a){if(1&n){const t=e.RV6();e.j41(0,"button",90),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.sendJson())}),e.EFF(1," Submit PDF Data "),e.k0s()}}function H(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",25)(1,"h4",26),e.EFF(2,"Convert PDF to Images"),e.k0s()(),e.j41(3,"div",27)(4,"div",28)(5,"div",29),e.DNE(6,y,2,1,"h1",30),e.k0s(),e.j41(7,"div",31)(8,"ngx-file-drop",32),e.bIt("onFileDrop",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.uploadFile(i))}),e.DNE(9,S,5,0,"ng-template",33),e.k0s()(),e.DNE(10,w,6,4,"div",34)(11,D,7,0,"div",34)(12,G,5,1,"div",35)(13,Y,28,9,"div",36),e.k0s()(),e.j41(14,"div",37)(15,"div",38)(16,"div",39),e.DNE(17,q,2,0,"button",40),e.j41(18,"div",41),e.DNE(19,L,2,0,"button",42),e.j41(20,"button",43),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG();return s.clearModalData(),e.Njj(s.closeModal(i))}),e.EFF(21," Cancel "),e.k0s()()()()()}if(2&n){const t=e.XpG();e.R7$(6),e.Y8G("ngIf",t.fileName),e.R7$(2),e.Y8G("dropZoneClassName","upload-background-image"),e.R7$(2),e.Y8G("ngIf",t.isUploading),e.R7$(),e.Y8G("ngIf",t.isConverting),e.R7$(),e.Y8G("ngIf",t.images.length>0),e.R7$(),e.Y8G("ngIf",t.JsonPDF),e.R7$(4),e.Y8G("ngIf",t.images.length>0),e.R7$(2),e.Y8G("ngIf",t.JsonPDF)}}function Z(n,a){if(1&n&&(e.j41(0,"div",113),e.nrm(1,"img",114),e.k0s()),2&n){const t=a.$implicit;e.Y8G("ngClass",e.eq3(2,T,0===a.index)),e.R7$(),e.Y8G("src",t,e.B4B)}}function Q(n,a){if(1&n&&(e.j41(0,"div",104)(1,"div",105)(2,"div",106),e.DNE(3,Z,2,4,"div",107),e.k0s(),e.j41(4,"button",108),e.nrm(5,"span",109),e.j41(6,"span",110),e.EFF(7,"Previous"),e.k0s()(),e.j41(8,"button",111),e.nrm(9,"span",112),e.j41(10,"span",110),e.EFF(11,"Next"),e.k0s()()()()),2&n){const t=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",t.getImagesArray())}}function W(n,a){if(1&n&&e.nrm(0,"img",115),2&n){const t=e.XpG(2);e.Y8G("src",t.getImagesArray()[0],e.B4B)}}function K(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",125)(1,"input",126),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG(4);return e.DH7(s.editedPlaceSqFT,i)||(s.editedPlaceSqFT=i),e.Njj(i)}),e.k0s(),e.j41(2,"button",127),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,s=e.XpG(3);return e.Njj(s.saveEditedPlace(i.Id))}),e.EFF(3," Save "),e.k0s(),e.j41(4,"button",128),e.bIt("click",function(){e.eBV(t);const i=e.XpG(4);return e.Njj(i.cancelEditPlace())}),e.EFF(5," Cancel "),e.k0s()()}if(2&n){const t=e.XpG(4);e.R7$(),e.R50("ngModel",t.editedPlaceSqFT)}}function ee(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",119)(1,"div",120)(2,"span",101),e.EFF(3),e.k0s(),e.j41(4,"div")(5,"button",121),e.bIt("click",function(){const i=e.eBV(t),s=i.$implicit,r=i.index,p=e.XpG(3);return e.Njj(p.startEditPlace(s.Id,s.BuildingSizeSf,r))}),e.nrm(6,"i",122),e.k0s(),e.j41(7,"button",123),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG(3);return e.Njj(s.openDeletePlaceModal(i.Id))}),e.nrm(8,"i",124),e.k0s()()(),e.DNE(9,K,6,1,"div",118),e.k0s()}if(2&n){const t=a.$implicit,o=e.XpG(3);e.R7$(3),e.SpI("",t.BuildingSizeSf," sqft"),e.R7$(6),e.Y8G("ngIf",o.editingPlaceId===t.Id&&o.showEditInput)}}function te(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",125)(1,"input",129),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG(3);return e.DH7(s.newPlaceSqFT,i)||(s.newPlaceSqFT=i),e.Njj(i)}),e.k0s(),e.j41(2,"button",127),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.addNewPlace())}),e.EFF(3," Add "),e.k0s(),e.j41(4,"button",128),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.cancelAddPlace())}),e.EFF(5," Cancel "),e.k0s()()}if(2&n){const t=e.XpG(3);e.R7$(),e.R50("ngModel",t.newPlaceSqFT)}}function ne(n,a){if(1&n&&(e.j41(0,"div",116),e.DNE(1,ee,10,2,"div",117)(2,te,6,1,"div",118),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",null==t.CustomPlace?null:t.CustomPlace.Availability),e.R7$(),e.Y8G("ngIf",t.showAddPlaceInput)}}function ie(n,a){if(1&n&&(e.j41(0,"a",87),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit;e.Y8G("href",t.URL,e.B4B),e.R7$(),e.SpI(" ",t.URL," ")}}function oe(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",131)(1,"span",101),e.EFF(2),e.DNE(3,ie,2,2,"a",86),e.k0s(),e.j41(4,"button",123),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG(3);return e.Njj(s.openDeleteTenantModal(i.Id))}),e.nrm(5,"i",124),e.k0s()()}if(2&n){const t=a.$implicit;e.R7$(2),e.SpI("",t.Name," - "),e.R7$(),e.Y8G("ngIf",t.URL)}}function se(n,a){1&n&&(e.j41(0,"div",136),e.EFF(1," Please enter a valid domain (e.g., example.com) "),e.k0s())}function ae(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",125)(1,"div",132)(2,"input",133),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG(3);return e.DH7(s.newTenantName,i)||(s.newTenantName=i),e.Njj(i)}),e.k0s()(),e.j41(3,"div",132)(4,"input",134,4),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG(3);return e.DH7(s.newTenantUrl,i)||(s.newTenantUrl=i),e.Njj(i)}),e.k0s(),e.DNE(6,se,2,0,"div",135),e.k0s(),e.j41(7,"button",127),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.addNewTenant())}),e.EFF(8," Add "),e.k0s(),e.j41(9,"button",128),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.cancelAddTenant())}),e.EFF(10," Cancel "),e.k0s()()}if(2&n){const t=e.sdS(5),o=e.XpG(3);e.R7$(2),e.R50("ngModel",o.newTenantName),e.R7$(2),e.R50("ngModel",o.newTenantUrl),e.R7$(2),e.Y8G("ngIf",t.invalid&&(t.dirty||t.touched))}}function le(n,a){if(1&n&&(e.j41(0,"div"),e.DNE(1,oe,6,2,"div",130)(2,ae,11,3,"div",118),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",null==t.CustomPlace?null:t.CustomPlace.Tenants),e.R7$(),e.Y8G("ngIf",t.showAddTenantInput)}}function re(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",91)(1,"h4",92),e.EFF(2),e.k0s(),e.j41(3,"button",93),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(4,"div",94)(5,"div",10)(6,"div",95)(7,"div",75)(8,"div",96),e.DNE(9,Q,12,1,"div",97)(10,W,1,1,"ng-template",null,3,e.C5r),e.k0s()(),e.j41(12,"div",75)(13,"div",98)(14,"p",99)(15,"b"),e.EFF(16,"Address:"),e.k0s(),e.EFF(17),e.k0s(),e.j41(18,"div",100)(19,"h6",101)(20,"b"),e.EFF(21,"Available Spaces"),e.k0s()(),e.j41(22,"i",102),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleAddPlaceInput())}),e.k0s()(),e.DNE(23,ne,3,2,"div",103),e.j41(24,"div",100)(25,"h6",101)(26,"b"),e.EFF(27,"Tenants"),e.k0s()(),e.j41(28,"i",102),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleAddTenantInput())}),e.k0s()(),e.DNE(29,le,3,2,"div",35),e.k0s()()()()()}if(2&n){const t=e.sdS(11),o=e.XpG();e.R7$(2),e.SpI(" ",null==o.CustomPlace?null:o.CustomPlace.CenterName," "),e.R7$(7),e.Y8G("ngIf",o.getImagesArray().length>1)("ngIfElse",t),e.R7$(8),e.LHq(" ",null==o.CustomPlace?null:o.CustomPlace.CenterAddress,", ",null==o.CustomPlace?null:o.CustomPlace.CenterCity,", ",null==o.CustomPlace?null:o.CustomPlace.CenterState," ",null==o.CustomPlace?null:o.CustomPlace.ZipCode,""),e.R7$(6),e.Y8G("ngIf",null==o.CustomPlace?null:o.CustomPlace.Availability),e.R7$(6),e.Y8G("ngIf",null==o.CustomPlace?null:o.CustomPlace.Tenants)}}function ce(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",137)(1,"h2",138),e.EFF(2),e.k0s(),e.j41(3,"p",139),e.EFF(4),e.k0s(),e.j41(5,"div",140)(6,"button",141),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cancel click"))}),e.EFF(7," Cancel "),e.k0s(),e.j41(8,"button",142),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.confirmDelete(i))}),e.EFF(9," Delete "),e.k0s()()()}if(2&n){const t=e.XpG();e.R7$(2),e.SpI(" Delete ",t.deleteType," "),e.R7$(2),e.SpI(" Are you sure you want to delete this ",t.deleteType,"? ")}}let b=(()=>{class n{constructor(t,o,i,s,r,p){this.spinner=t,this.modalService=o,this.PlacesService=i,this.httpClient=s,this.sanitizer=r,this.breadcrumbService=p,this.properties=[],this.files=[],this.images=[],this.uploadProgress=0,this.isUploading=!1,this.isConverting=!1,this.pdfFileName="",this.AvailabilityAndTenants={},this.showInputField=null,this.showAddPlaceInput=!1,this.editingPlaceId=null,this.showEditInput=!1,this.deleteType="",this.deleteId=null,this.showAddTenantInput=!1,this.newTenantName="",this.newTenantUrl="",this.Notes=""}ngOnInit(){this.breadcrumbService.setBreadcrumbs([{label:"Manage Properties",url:"/manage-properties"}]),this.contactID=localStorage.getItem("contactId"),this.GetContactShoppingCenters()}GetContactShoppingCenters(){this.spinner.show(),this.PlacesService.GenericAPI({Name:"GetContactShoppingCenters",MainEntity:null,Params:{ContactId:this.contactID},Json:null}).subscribe({next:o=>{this.properties=o.json,this.spinner.hide()}})}openShoppingModal(t){this.selectedShoppingID=t.toString(),this.modalService.open(this.openShopping,{size:"xl",centered:!0}),this.GetShoppingCenterDetailsById()}GetShoppingCenterDetailsById(){this.spinner.show(),this.PlacesService.GenericAPI({Name:"GetShoppingCenterDetailsById",MainEntity:null,Params:{ShoppingCenterId:this.selectedShoppingID},Json:null}).subscribe({next:o=>{this.CustomPlace=o.json,this.spinner.hide()}})}getImagesArray(){return this.CustomPlace?.Images?this.CustomPlace.Images.split(",").map(t=>t.trim()):[]}toggleAddTenantInput(){this.CustomPlace?.Tenants||(this.CustomPlace={...this.CustomPlace,Tenants:[]}),this.showAddTenantInput=!this.showAddTenantInput,this.showAddTenantInput&&(this.newTenantName="",this.newTenantUrl="")}cancelAddTenant(){this.showAddTenantInput=!1,this.newTenantName="",this.newTenantUrl=""}addNewTenant(){this.newTenantName&&""!==this.newTenantName.trim()&&this.newTenantUrl&&""!==this.newTenantUrl.trim()?/^[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(this.newTenantUrl.trim())?(this.spinner.show(),this.PlacesService.GenericAPI({Name:"ModifyTenantsWithBranch",Params:{ShoppingCenterId:this.selectedShoppingID,Name:this.newTenantName,Url:this.newTenantUrl}}).subscribe({next:i=>{const s={Id:i.json?.Id||this.CustomPlace?.Tenants.length+1,Name:this.newTenantName,URL:this.newTenantUrl};this.CustomPlace&&this.CustomPlace.Tenants?this.CustomPlace.Tenants.push(s):this.CustomPlace={...this.CustomPlace,Tenants:[s]},this.spinner.hide(),this.showToast("New tenant added successfully!"),this.showAddTenantInput=!1,this.newTenantName=""}})):alert("Please enter a valid domain (e.g., example.com)."):this.showToast("Please enter a valid tenant name.")}toggleAddPlaceInput(){this.CustomPlace?.Availability||(this.CustomPlace={...this.CustomPlace,Availability:[]}),this.showAddPlaceInput=!this.showAddPlaceInput,this.showAddPlaceInput&&(this.newPlaceSqFT=0)}cancelAddPlace(){this.showAddPlaceInput=!1,this.newPlaceSqFT=0}addNewPlace(){!this.newPlaceSqFT||this.newPlaceSqFT<=0?this.showToast("Please enter a valid SQFT"):(this.spinner.show(),this.PlacesService.GenericAPI({Name:"AddAvailability",Params:{ShoppingCenterId:this.selectedShoppingID,BuildingSizeSf:this.newPlaceSqFT}}).subscribe({next:o=>{const i={Id:o.json?.Id||this.CustomPlace?.Availability.length+1,BuildingSizeSf:this.newPlaceSqFT};this.CustomPlace&&this.CustomPlace.Availability?this.CustomPlace.Availability.push(i):this.CustomPlace={...this.CustomPlace,Availability:[i]},this.showAddPlaceInput=!1,this.spinner.hide()}}))}startEditPlace(t,o,i){this.editingPlaceId=t,this.showEditInput=!0,this.editedPlaceSqFT=o}cancelEditPlace(){this.editingPlaceId=null,this.showEditInput=!1,this.editedPlaceSqFT=0}saveEditedPlace(t){!this.editedPlaceSqFT||this.editedPlaceSqFT<=0?this.showToast("Please enter a valid SQFT"):(this.spinner.show(),this.PlacesService.GenericAPI({Name:"UpdateBuildingSizeSfForAvailability",Params:{PlaceId:t,ShoppingCenterId:this.selectedShoppingID,NewBuildingSizeSf:this.editedPlaceSqFT}}).subscribe({next:i=>{const s=this.CustomPlace?.Availability.findIndex(r=>r.Id===t);-1!==s&&this.CustomPlace?.Availability&&(this.CustomPlace.Availability[s].BuildingSizeSf=this.editedPlaceSqFT),this.spinner.hide(),this.showToast("Place updated successfully!"),this.editingPlaceId=null,this.showEditInput=!1,this.editedPlaceSqFT=0}}))}openDeletePlaceModal(t){this.deleteId=t,this.deleteType="Place",this.modalService.open(this.deletePlaceModal,{size:"md"})}openDeleteTenantModal(t){this.deleteId=t,this.deleteType="Tenant",this.modalService.open(this.deletePlaceModal,{size:"md"})}confirmDelete(t){"Place"===this.deleteType&&null!==this.deleteId?this.deletePlace(this.deleteId):"Tenant"===this.deleteType&&null!==this.deleteId&&this.deleteTenant(this.deleteId),t.close("Delete confirmed")}deletePlace(t){this.spinner.show(),this.PlacesService.GenericAPI({Name:"DeleteAvailabilityByPlaceId",Params:{placeId:t,ShoppingCenterId:this.selectedShoppingID}}).subscribe({next:i=>{const s=this.CustomPlace?.Availability.findIndex(r=>r.Id===t);-1!==s&&this.CustomPlace?.Availability&&this.CustomPlace.Availability.splice(s,1),this.showToast("Place deleted successfully!"),this.spinner.hide()}})}deleteTenant(t){this.spinner.show(),this.PlacesService.GenericAPI({Name:"DeleteBranchByOrganizationId",Params:{organizationID:t,shoppingCenterId:this.selectedShoppingID}}).subscribe({next:i=>{const s=this.CustomPlace?.Tenants.findIndex(r=>r.Id===t);-1!==s&&this.CustomPlace?.Tenants&&this.CustomPlace.Tenants.splice(s,1),this.spinner.hide(),this.showToast("Tenant deleted successfully!")}})}openUploadModal(t){if(void 0===t){const o=crypto.randomUUID();this.selectedShoppingID=o}else this.selectedShoppingID=t.toString();this.modalService.open(this.uploadPDF,{size:"xl",centered:!0})}closeModal(t){t.dismiss(),this.fileName="",this.uploadProgress=0,this.isUploading=!1,this.isConverting=!1,this.images=[]}uploadFile(t){this.files=t;for(const o of t)o.fileEntry.isFile&&o.fileEntry.file(s=>{const r=new FormData;r.append("filename",s),this.fileName=s.name,this.isUploading=!0,this.uploadProgress=0;const me=new m.Kd("POST",`https://api.cherrypick.com/api/BrokerWithChatGPT/ConvertPdfToImages/${this.selectedShoppingID}/${this.contactID}`,r,{reportProgress:!0,responseType:"json"});this.httpClient.request(me).subscribe(d=>{if(d.type===m.hv.UploadProgress)this.uploadProgress=Math.round(100*d.loaded/d.total),100===this.uploadProgress&&(this.isUploading=!1,this.isConverting=!0);else if(d instanceof m.cS){const g=d.body;g&&g.images&&(this.images=g.images.map((ge,he)=>({name:`Image ${he+1}`,type:"image/png",content:ge,selected:!1})),this.pdfFileName=g.pdfFileName),this.isConverting=!1,this.spinner.hide(),this.showToast("PDF File uploaded and converted successfully!"),this.saveFileInfoInDatabase()}},d=>{this.isUploading=!1,this.isConverting=!1,this.spinner.hide(),this.showToast("Failed to upload or convert PDF file!")})})}saveFileInfoInDatabase(){this.spinner.show(),this.PlacesService.GenericAPI({Name:"LogSubmission",MainEntity:null,Params:{ContactId:this.contactID,ShoppingCenterId:this.selectedShoppingID,FileName:this.pdfFileName},Json:null}).subscribe({next:o=>{this.spinner.hide()}})}displayCustomImage(t){return this.sanitizer.bypassSecurityTrustUrl(`data:${t.type};base64,${t.content}`)}sendImagesArray(){this.spinner.show();const o=this.images.filter(s=>s.selected).map(s=>s.content);this.PlacesService.SendImagesArray(o,this.selectedShoppingID).subscribe({next:s=>{this.JsonPDF=s,this.showToast("Images Converted successfully!"),this.spinner.hide()}})}sendJson(){this.spinner.show();const t=this.selectedShoppingID;this.JsonPDF={...this.JsonPDF,CenterNameIsAdded:this.JsonPDF.CenterNameIsAdded||!1,CenterTypeIsAdded:this.JsonPDF.CenterTypeIsAdded||!1};const o={...this.JsonPDF,Availability:this.JsonPDF.Availability.map(i=>({...i,isAdded:i.isAdded||!1})),Tenants:this.JsonPDF.Tenants.map(i=>({...i,isAdded:i.isAdded||!1})),Notes:this.Notes};this.PlacesService.SendJsonData(o,t).subscribe({next:i=>{this.showToast("shopping center updated successfully!"),this.clearModalData(),this.modalService.dismissAll(),this.spinner.hide()}})}clearModalData(){this.images=[],this.JsonPDF=null,this.AvailabilityAndTenants={},this.fileName="",this.uploadProgress=0,this.isUploading=!1,this.isConverting=!1,this.files=[]}showToast(t){const o=document.getElementById("customToast");document.getElementById("toastMessage").innerText=t,o.classList.add("show"),setTimeout(()=>{o.classList.remove("show")},3e3)}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(f.ex),e.rXU(C.Bq),e.rXU(v._),e.rXU(m.Qq),e.rXU(x.up),e.rXU(F.b))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-manage-properties"]],viewQuery:function(o,i){if(1&o&&(e.GBs(I,7),e.GBs(M,7),e.GBs(k,7)),2&o){let s;e.mGM(s=e.lsd())&&(i.uploadPDF=s.first),e.mGM(s=e.lsd())&&(i.openShopping=s.first),e.mGM(s=e.lsd())&&(i.deletePlaceModal=s.first)}},decls:31,vars:1,consts:[["uploadPDF",""],["openShopping",""],["deletePlaceModal",""],["singleImage",""],["tenantUrl","ngModel"],["type","ball-scale-multiple"],[1,"container"],[1,"row","mt-3","m-0","p-0"],[1,"p-0",2,"min-height","100vh","max-height","max-content"],[1,"background"],[1,"container-fluid"],[1,"pt-3","d-flex","justify-content-end"],[1,"upload",3,"click"],[1,"procpect-table"],[1,"procpect-table-head"],[1,"padd-20"],[1,"procpect-table-body"],[4,"ngFor","ngForOf"],["id","customToast",1,"custom-toast"],[1,"toast-content"],["id","toastMessage"],[1,"center-name",3,"click"],[1,"table-text"],[2,"cursor","pointer","font-weight","600",3,"click"],[1,"fa-solid","fa-file-pdf","mx-1",2,"font-size","20px","color","#001f3f"],[1,"d-flex","justify-content-center","align-items-center","view-act"],[1,"mb-0"],[1,"modal-body",2,"overflow","auto","max-height","80vh"],[1,"col-12","mr-1"],[2,"width","100%"],["class","modal-header head mb-0",4,"ngIf"],[1,"col-md-12","p-0"],["dropZoneLabel","Drop files here",3,"onFileDrop","dropZoneClassName"],["ngx-file-drop-content-tmp",""],["class","mt-3",4,"ngIf"],[4,"ngIf"],["class","mt-5 shopping-center-container",4,"ngIf"],[1,"modal-footer"],[1,"text-center","col-12"],[1,"d-flex","justify-content-end"],["class","upload mx-1",3,"click",4,"ngIf"],[1,"right"],["class","btn btn-success",3,"click",4,"ngIf"],[1,"btn","btn-secondary","mx-1",3,"click"],[1,"modal-header","head","mb-0"],[1,"text-dark","drop-sty","mx-2"],["type","button",1,"btn","btn-success","ml-2","secondary-color","upload",3,"click"],[1,"mt-3"],[1,"progress"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped"],[1,"text-center","mt-2"],[1,"text-center"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"],[1,"mt-2"],[1,"my-prop"],[1,"row","m-0"],["class","col-md-4 mb-3",4,"ngFor","ngForOf"],[1,"col-md-4","mb-3"],[1,"card"],[1,"form-check","m-2","mb-0"],["type","checkbox",1,"form-check-input","input-sty",2,"border","2px solid #cbcbcb",3,"ngModelChange","ngModel","id"],[1,"form-check-label",3,"for"],[1,"img-fluid","gpt-image",3,"src","alt"],[1,"card-body"],[1,"mt-5","shopping-center-container"],[1,"row","m-0","justify-content-center"],[1,"col-md-10","col-lg-8"],[1,"card","shadow-sm","mb-4"],[1,"card-header","text-white","text-center",2,"background-color","#e4e7e9 !important"],[1,"mb-0","text-dark"],[1,"col-12"],[1,"row","m-0","mb-0"],[1,"row","m-0","g-4"],["class","col-md-6",4,"ngIf"],[1,"col-md-6"],[1,"card","shadow-sm","h-100"],[1,"card-header","text-white",2,"background-color","#081c3e !important"],[1,"mb-0","d-flex","justify-content-center"],[1,"list-group","list-group-flush"],["class","list-group-item border-0 px-0",4,"ngFor","ngForOf"],[1,"col-sm-4"],[1,"col-sm-8"],[1,"list-group-item","border-0","px-0"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModelChange","ngModel","id"],["target","_blank","class","tenant-link",3,"href",4,"ngIf"],["target","_blank",1,"tenant-link",3,"href"],["rows","3","placeholder","Write Notes Here",1,"form-control",3,"ngModelChange","ngModel"],[1,"upload","mx-1",3,"click"],[1,"btn","btn-success",3,"click"],[1,"modal-header","bg-light","border-bottom"],[1,"w-100","text-center",2,"font-weight","600"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","p-4",2,"overflow","auto","max-height","80vh"],[1,"row","m-0","g-3","align-items-start"],[1,"image-container","rounded","shadow-sm"],["class","carousel-container",4,"ngIf","ngIfElse"],[1,"details-container","p-3","bg-light","rounded","shadow-sm"],[1,"mb-3",2,"color","#7a8591"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[2,"color","#7a8591"],[1,"fa-solid","fa-plus","cursor-pointer","text-primary",2,"cursor","pointer",3,"click"],["class","mb-4",4,"ngIf"],[1,"carousel-container"],["id","propertyCarousel","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],["class","carousel-item",3,"ngClass",4,"ngFor","ngForOf"],["type","button","data-bs-target","#propertyCarousel","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#propertyCarousel","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"carousel-item",3,"ngClass"],["alt","Property Image",1,"d-block","w-100","rounded",3,"src"],["alt","Property Image",1,"img-fluid","rounded","shadow-sm",3,"src"],[1,"mb-4"],["class","py-2 border-bottom",4,"ngFor","ngForOf"],["class","mt-3 d-flex align-items-center gap-2",4,"ngIf"],[1,"py-2","border-bottom"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn_edit","mx-1",3,"click"],[1,"fa-regular","fa-pen-to-square","text-secondary","d-flex","justify-content-center"],["data-bs-toggle","modal","data-bs-target","#deletePlaceModal",1,"btn_trash",3,"click"],[1,"fa","fa-trash","text-danger","d-flex","justify-content-center"],[1,"mt-3","d-flex","align-items-center","gap-2"],["type","number","placeholder","Edit square footage","min","1",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"btn","btn-danger","btn-sm",3,"click"],["type","number","placeholder","Enter square footage","min","1",1,"form-control",3,"ngModelChange","ngModel"],["class","d-flex justify-content-between align-items-center py-2 border-bottom",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","py-2","border-bottom"],[1,"d-flex","align-items-center","gap-2"],["type","text","placeholder","Organization name","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","URL (example.com)","required","","pattern","[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+",1,"form-control",3,"ngModelChange","ngModel"],["class","text-danger small mt-1",4,"ngIf"],[1,"text-danger","small","mt-1"],[1,"modal-body-general","p-4","rounded",2,"background-color","#f8f9fa","border-radius","8px","box-shadow","0 4px 8px rgba(0, 0, 0, 0.1)"],[1,"text-center","mb-4",2,"font-size","1.5rem","font-weight","bold"],[1,"text-center",2,"font-size","1rem","color","#6c757d"],[1,"d-flex","justify-content-center","mt-4"],["type","button",1,"btn","btn-secondary","me-4","px-4","py-2",2,"border-radius","4px",3,"click"],["type","button",1,"btn","btn-danger","px-4","py-2",2,"border-radius","4px",3,"click"]],template:function(o,i){if(1&o){const s=e.RV6();e.nrm(0,"ngx-spinner",5),e.j41(1,"div",6)(2,"section",7)(3,"div",8)(4,"div",9)(5,"div",10)(6,"div",11)(7,"button",12),e.bIt("click",function(){return e.eBV(s),e.Njj(i.openUploadModal(i.test))}),e.EFF(8,"Upload PDF"),e.k0s()(),e.j41(9,"table",13)(10,"thead",14)(11,"tr",15)(12,"th"),e.EFF(13,"Name"),e.k0s(),e.j41(14,"th"),e.EFF(15,"Address"),e.k0s(),e.j41(16,"th"),e.EFF(17,"ZipCode"),e.k0s(),e.j41(18,"th"),e.EFF(19,"PDF"),e.k0s()()(),e.j41(20,"tbody",16),e.DNE(21,j,11,5,"tr",17),e.k0s()()()()()()(),e.DNE(22,H,22,8,"ng-template",null,0,e.C5r)(24,re,30,9,"ng-template",null,1,e.C5r)(26,ce,10,2,"ng-template",null,2,e.C5r),e.j41(28,"div",18)(29,"div",19),e.nrm(30,"p",20),e.k0s()()}2&o&&(e.R7$(21),e.Y8G("ngForOf",i.properties))},dependencies:[_.YU,_.Sq,_.bT,c.me,c.Q0,c.Zm,c.BC,c.YS,c.R_,c.VZ,c.vS,f.et,P.M$,P.vL],styles:['.t-head[_ngcontent-%COMP%]{border-radius:20px;padding:10px;background-color:#e4e7e9;font-size:16px;font-weight:500;color:#0d0c0c}.padd-20[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:20px}.padd-20[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-top-left-radius:12px}.padd-20[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-top-right-radius:12px}.background[_ngcontent-%COMP%]{background-color:#fff;height:100%}.my-prop[_ngcontent-%COMP%]{color:#16181d;font-size:18px;font-style:normal;font-weight:600;line-height:24px}.upload[_ngcontent-%COMP%]{width:auto;min-width:110px;border-radius:7px;background:#001f3f;color:#fff;text-align:center;font-size:15px;font-style:normal;font-weight:500;border:0;padding:7px 10px;white-space:nowrap}.upload[_ngcontent-%COMP%]:hover{background-color:#043566}.view-act[_ngcontent-%COMP%]{padding-top:10px;padding-left:10px;padding-right:20px}.view-act[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700;font-size:20px;color:#001f3f}.close[_ngcontent-%COMP%]{background-color:#fff;border:none}.modal-header[_ngcontent-%COMP%]{padding:10px;margin-top:7px;font-size:20px;display:flex;justify-content:center;background:#e4e7e9}.shopping-center-container[_ngcontent-%COMP%]{padding:20px}.card[_ngcontent-%COMP%]{border-radius:10px;transition:transform .2s}.card-header[_ngcontent-%COMP%]{border-radius:10px 10px 0 0;padding:15px}dl[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{font-weight:600;color:#444}dl[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{margin-bottom:10px}.list-group-item[_ngcontent-%COMP%]{padding:10px 0}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#007bff;border-color:#007bff}.tenant-link[_ngcontent-%COMP%]{color:#007bff;text-decoration:none;margin-left:5px}.tenant-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.modal-header[_ngcontent-%COMP%]{padding:1.5rem}.image-container[_ngcontent-%COMP%]{padding:10px}.carousel-container[_ngcontent-%COMP%]{max-width:100%}.carousel-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;height:300px}.details-container[_ngcontent-%COMP%]{padding:10px}.list-group-item[_ngcontent-%COMP%]{border:none;padding:8px 0}.badge[_ngcontent-%COMP%]{font-size:.9em;padding:.5em 1em}.carousel-control-next[_ngcontent-%COMP%]{right:-20px!important}.carousel-control-prev[_ngcontent-%COMP%]{left:-20px!important}.carousel-control-prev-icon[_ngcontent-%COMP%]:before, .carousel-control-next-icon[_ngcontent-%COMP%]:before{content:"";display:block}.center-name[_ngcontent-%COMP%]{font-size:20px;white-space:nowrap;font-weight:700;color:#000;margin:0;transition:color .3s;cursor:pointer}.center-name[_ngcontent-%COMP%]:hover{color:gray}.table-text[_ngcontent-%COMP%]{color:#7a8591;font-size:1rem;font-style:normal;font-weight:400;line-height:30px}.btn_trash[_ngcontent-%COMP%]{background:transparent;color:#e00000;width:30px;height:30px;border:1px solid rgb(224,0,0);padding-inline:0;border-radius:5px;cursor:pointer}.btn_edit[_ngcontent-%COMP%]{background:transparent;color:#6b7785;width:30px;height:30px;border:1px solid rgb(107,119,133,1);padding-inline:0;border-radius:5px;cursor:pointer}.input-sty[_ngcontent-%COMP%]{margin-top:0;margin-left:-22px;border:2px solid #cbcbcb;font-size:22px;margin-bottom:4px}']})}}return n})();const de=[{path:"",component:b},{path:"manage-properties",component:b}];let pe=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[u.iI.forChild(de),u.iI]})}}return n})(),_e=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[_.MD,pe]})}}return n})()}}]);